{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\store\\module\\user.js","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\store\\module\\user.js","mtime":1567648062344},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\.babelrc","mtime":1567648062203},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport { login, regist, logout, getUserInfo as _getUserInfo } from '@/api/user';\nimport { setToken as _setToken, getToken } from '@/libs/util';\nimport { Modal, Message } from 'iview';\nexport default {\n  state: {\n    userName: '',\n    userId: '',\n    avatorImgPath: '',\n    headPic: '',\n    token: getToken(),\n    access: '',\n    hasGetInfo: false\n  },\n  mutations: {\n    setAvator: function setAvator(state, avatorPath) {\n      state.avatorImgPath = avatorPath;\n    },\n    setUserId: function setUserId(state, id) {\n      state.userId = id;\n    },\n    setUserName: function setUserName(state, userName) {\n      state.userName = userName;\n    },\n    setPassword: function setPassword(state, password) {\n      state.password = password;\n    },\n    setHeadPic: function setHeadPic(state, headPic) {\n      state.headPic = headPic;\n    },\n    setPhone: function setPhone(state, phone) {\n      state.phone = phone;\n    },\n    setName: function setName(state, name) {\n      state.name = name;\n    },\n    setTeacherId: function setTeacherId(state, teacherId) {\n      state.teacherId = teacherId;\n    },\n    setSubjectId: function setSubjectId(state, subjectId) {\n      state.subjectId = subjectId;\n    },\n    setAccess: function setAccess(state, access) {\n      state.access = access;\n    },\n    setNewsCount: function setNewsCount(state, newsCount) {\n      state.newsCount = newsCount;\n    },\n    setToken: function setToken(state, token) {\n      state.token = token;\n\n      _setToken(token);\n    },\n    setHasGetInfo: function setHasGetInfo(state, status) {\n      state.hasGetInfo = status;\n    }\n  },\n  actions: {\n    // 登录\n    handleLogin: function handleLogin(_ref, _ref2) {\n      var commit = _ref.commit;\n      var userName = _ref2.userName,\n          password = _ref2.password;\n      userName = userName.trim();\n      return new Promise(function (resolve, reject) {\n        login({\n          userName: userName,\n          password: password\n        }).then(function (res) {\n          console.log(\"111111\" + JSON.stringify(res));\n\n          if (res.data.result) {\n            if (res.data.result.error) {\n              Message.error(res.data.result.error);\n            }\n          } // \n\n\n          var data = res.data;\n          commit('setToken', data.result.token);\n          console.log(data);\n          resolve();\n        }).catch(function (err) {\n          reject(err);\n        });\n      });\n    },\n    // 退出登录\n    handleLogOut: function handleLogOut(_ref3) {\n      var state = _ref3.state,\n          commit = _ref3.commit;\n      return new Promise(function (resolve, reject) {\n        logout(state.token).then(function () {\n          commit('setToken', '');\n          commit('setAccess', []);\n          resolve();\n        }).catch(function (err) {\n          reject(err);\n        }); // 如果你的退出登录无需请求接口，则可以直接使用下面三行代码而无需使用logout调用接口\n        // commit('setToken', '')\n        // commit('setAccess', [])\n        // resolve()\n      });\n    },\n    // 获取用户相关信息\n    getUserInfo: function getUserInfo(_ref4) {\n      var state = _ref4.state,\n          commit = _ref4.commit;\n      return new Promise(function (resolve, reject) {\n        try {\n          _getUserInfo(state.token).then(function (res) {\n            console.log(JSON.stringify(res));\n            var data = res.data;\n\n            if (null != data.result.manager.headPic) {\n              commit('setAvator', 'http://localhost:8081/picture/' + data.result.manager.headPic);\n            } else {\n              commit('setAvator', 'http://localhost:8081/picture/' + '1.png');\n            }\n\n            commit('setUserName', data.result.manager.username);\n            commit('setHeadPic', data.result.manager.headPic);\n            commit('setPhone', data.result.manager.phone);\n            commit('setUserId', data.result.manager.id);\n            commit('setName', data.result.manager.name);\n            commit('setPassword', data.result.manager.password);\n            commit('setTeacherId', data.result.manager.teacherId);\n            commit('setSubjectId', data.result.manager.subjectId);\n            commit('setAccess', data.result.roles);\n            commit('setNewsCount', data.result.count);\n            commit('setHasGetInfo', true);\n            resolve(data);\n          }).catch(function (err) {\n            reject(err);\n          });\n        } catch (error) {\n          reject(error);\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["src\\store\\module\\user.js"],"names":["login","regist","logout","getUserInfo","setToken","getToken","Modal","Message","state","userName","userId","avatorImgPath","headPic","token","access","hasGetInfo","mutations","setAvator","avatorPath","setUserId","id","setUserName","setPassword","password","setHeadPic","setPhone","phone","setName","name","setTeacherId","teacherId","setSubjectId","subjectId","setAccess","setNewsCount","newsCount","setHasGetInfo","status","actions","handleLogin","commit","trim","Promise","resolve","reject","then","console","log","JSON","stringify","res","data","result","error","catch","err","handleLogOut","manager","username","roles","count"],"mappings":"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","sourceRoot":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue","sourcesContent":["import { login,regist ,logout, getUserInfo } from '@/api/user'\r\nimport { setToken, getToken } from '@/libs/util'\r\nimport { Modal,Message } from 'iview'\r\n\r\nexport default {\r\n  state: {\r\n    userName: '',\r\n    userId: '',\r\n    avatorImgPath: '',\r\n    headPic: '',\r\n    token: getToken(),\r\n    access: '',\r\n    hasGetInfo: false\r\n  },\r\n  mutations: {\r\n    setAvator (state, avatorPath) {\r\n      state.avatorImgPath = avatorPath\r\n    },\r\n    setUserId (state, id) {\r\n      state.userId = id\r\n    },\r\n    setUserName (state, userName) {\r\n      state.userName = userName\r\n    },\r\n    setPassword (state, password) {\r\n      state.password = password\r\n    },\r\n    setHeadPic (state, headPic) {\r\n      state.headPic = headPic\r\n    },\r\n    setPhone (state, phone) {\r\n      state.phone = phone\r\n    },\r\n    setName (state, name) {\r\n      state.name = name\r\n    },\r\n    setTeacherId (state, teacherId) {\r\n      state.teacherId = teacherId\r\n    },\r\n    setSubjectId (state, subjectId) {\r\n      state.subjectId = subjectId\r\n    },\r\n    setAccess (state, access) {\r\n      state.access = access\r\n    },\r\n    setNewsCount(state,newsCount){\r\n      state.newsCount = newsCount\r\n    },\r\n    setToken (state, token) {\r\n      state.token = token\r\n      setToken(token)\r\n    },\r\n    setHasGetInfo (state, status) {\r\n      state.hasGetInfo = status\r\n    }\r\n  },\r\n  actions: {\r\n    // 登录\r\n    handleLogin ({ commit }, {userName, password}) {\r\n      userName = userName.trim()\r\n      return new Promise((resolve, reject) => {\r\n        login({\r\n          userName,\r\n          password\r\n        }).then(res => {\r\n          console.log(\"111111\"+JSON.stringify(res))\r\n          if(res.data.result){\r\n            if(res.data.result.error){\r\n              Message.error(res.data.result.error);\r\n            }\r\n          }\r\n          // \r\n          const data = res.data\r\n          commit('setToken', data.result.token)\r\n          console.log(data)\r\n          resolve()\r\n        }).catch(err => {\r\n          reject(err)\r\n        })\r\n      })\r\n    },\r\n    // 退出登录\r\n    handleLogOut ({ state, commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        logout(state.token).then(() => {\r\n          commit('setToken', '')\r\n          commit('setAccess', [])\r\n          resolve()\r\n        }).catch(err => {\r\n          reject(err)\r\n        })\r\n        // 如果你的退出登录无需请求接口，则可以直接使用下面三行代码而无需使用logout调用接口\r\n        // commit('setToken', '')\r\n        // commit('setAccess', [])\r\n        // resolve()\r\n      })\r\n    },\r\n    // 获取用户相关信息\r\n    getUserInfo ({ state, commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        try {\r\n          getUserInfo(state.token).then(res => {\r\n            console.log(JSON.stringify(res))\r\n            const data = res.data\r\n            if (null != data.result.manager.headPic) {\r\n              commit('setAvator', 'http://localhost:8081/picture/'+data.result.manager.headPic)\r\n            }else {\r\n              commit('setAvator', 'http://localhost:8081/picture/'+'1.png')\r\n            }\r\n            \r\n            commit('setUserName', data.result.manager.username)\r\n            commit('setHeadPic', data.result.manager.headPic)\r\n            commit('setPhone', data.result.manager.phone)\r\n            commit('setUserId', data.result.manager.id)\r\n            commit('setName', data.result.manager.name)\r\n            commit('setPassword', data.result.manager.password)\r\n            commit('setTeacherId', data.result.manager.teacherId)\r\n            commit('setSubjectId', data.result.manager.subjectId)\r\n            commit('setAccess', data.result.roles)\r\n            commit('setNewsCount', data.result.count)\r\n            commit('setHasGetInfo', true)\r\n            resolve(data)\r\n          }).catch(err => {\r\n            reject(err)\r\n          })\r\n        } catch (error) {\r\n          reject(error)\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n"]}]}