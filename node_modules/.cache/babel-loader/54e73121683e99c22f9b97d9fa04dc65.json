{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\student\\customStudent.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\student\\customStudent.vue","mtime":1567648062328},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\.babelrc","mtime":1567648062203},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u8339\\u5BB6\\u8C6A\\\\Desktop\\\\20210416_rujh_vue\\\\20210416_rujh_vue\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { hasOneOf } from '@/libs/tools';\nimport { customTableData, recordTableData, commentDel1 } from '@/api/data';\nexport default {\n  data: function data() {\n    var _this = this;\n\n    return {\n      searchText: '',\n      // 搜索内容初始化\n      pageSize: 10,\n      currentPage: 1,\n      total: 1,\n      recordModal: false,\n      //评分记录模态框\n      tableCurrentPage: 1,\n      //评分记录当前页码\n      tableTotalPage: 1,\n      //评分记录总页码\n      userId: '',\n      //评分记录用户id\n      //customItemArr: [],//评分记录\n      customId: '',\n      //评分记录Id\n      textModal: false,\n      //评分记录模态框\n      //delItemStatu:false,\n      customDelText: '',\n      formData: {},\n      //表单信息\n      selectItemArr: [],\n      // 选中项目id\n      tableCol: [{\n        title: '姓名',\n        key: 'name'\n      }, {\n        title: '综合评分',\n        key: 'customNumPj',\n        render: function render(h, params) {\n          //console.log(\"++++++\"+JSON.stringify(params))\n          var oName = params.row.customNumPj + '分';\n          return h('div', [h('Rate', {\n            props: {\n              count: 5,\n              disabled: true,\n              allowHalf: true,\n              showText: true,\n              value: params.row.customNumPj\n            }\n          }, oName)]);\n        }\n      }, {\n        width: 100,\n        title: '详情',\n        key: 'examineStatus',\n        render: function render(h, params) {\n          // if(this.viewTeacher){\n          return h('div', [h('Button', {\n            props: {\n              type: 'primary',\n              size: 'large',\n              vertical: true //disabled:this.viewStudent\n\n            },\n            on: {\n              click: function click() {\n                //console.log(\"++++++\"+JSON.stringify(params))\n                _this.userId = params.row.id;\n\n                _this.tableInit();\n\n                _this.recordModal = true;\n              }\n            }\n          }, '详情')]);\n        }\n      }],\n      recordCol: [{\n        type: 'selection',\n        width: 60,\n        align: 'center'\n      }, {\n        title: '评分人(老师)',\n        key: 'teacherName'\n      }, {\n        title: '评价内容',\n        key: 'customText'\n      }, {\n        title: '评分',\n        key: 'customNum',\n        render: function render(h, params) {\n          //console.log(\"++++++\"+JSON.stringify(params))\n          var oName = params.row.customNum + '分';\n          return h('div', [h('Rate', {\n            props: {\n              count: 5,\n              disabled: true,\n              allowHalf: true,\n              showText: true,\n              value: params.row.customNum\n            }\n          }, oName)]);\n        }\n      }],\n      tableData: [],\n      recordData: []\n    };\n  },\n  methods: {\n    pageInit: function () {\n      var _pageInit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                customTableData(this.pageSize, this.currentPage, this.startTime, this.endTime, this.searchText).then(function (res) {\n                  if (res.data.success) {\n                    _this2.total = res.data.result.data.totalSize;\n                    _this2.tableData = res.data.result.data.pageList;\n                  } else if (res.data.errorMsg) {\n                    _this2.$Message.warning({\n                      content: res.data.errorMsg\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function pageInit() {\n        return _pageInit.apply(this, arguments);\n      };\n    }(),\n    tableInit: function () {\n      var _tableInit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _this3 = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                recordTableData(this.userId, this.tableCurrentPage).then(function (res) {\n                  //console.log(\"555555\"+JSON.stringify(res));\n                  _this3.recordData = [];\n\n                  if (res.data.success) {\n                    _this3.tableCurrentPage = res.data.result.data.currectPage;\n                    _this3.tableTotalPage = res.data.result.data.totalPage;\n                    var dataList = res.data.result.data.pageList;\n                    var recordO = {};\n                    var _iteratorNormalCompletion = true;\n                    var _didIteratorError = false;\n                    var _iteratorError = undefined;\n\n                    try {\n                      for (var _iterator = dataList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                        var item = _step.value;\n                        recordO = {};\n                        recordO.id = item.id;\n                        recordO.customNum = item.customNum;\n                        recordO.customText = item.customText;\n                        recordO.teacherName = item.teacherName; // recordO.positionAddr = item.lock.positionAddr;\n                        // recordO.name = item.lock.name;\n\n                        _this3.recordData.push(recordO);\n                      }\n                    } catch (err) {\n                      _didIteratorError = true;\n                      _iteratorError = err;\n                    } finally {\n                      try {\n                        if (!_iteratorNormalCompletion && _iterator.return != null) {\n                          _iterator.return();\n                        }\n                      } finally {\n                        if (_didIteratorError) {\n                          throw _iteratorError;\n                        }\n                      }\n                    }\n                  } else if (res.data.errorMsg) {\n                    _this3.$Message.warning({\n                      content: res.data.errorMsg\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      return function tableInit() {\n        return _tableInit.apply(this, arguments);\n      };\n    }(),\n    changePage: function changePage(page) {\n      this.currentPage = page;\n      this.pageInit();\n    },\n    changeSize: function changeSize(size) {\n      this.pageSize = size;\n      this.currentPage = 1;\n      this.pageInit();\n    },\n    closeRecordModal: function closeRecordModal() {\n      this.recordModal = false;\n      this.tableCurrentPage = 1;\n      this.recordData = [];\n    },\n    closeTextModal: function closeTextModal() {\n      this.textModal = false;\n      this.tableCurrentPage = 1;\n      this.recordData = [];\n    },\n    // 选中项\n    selectOption: function selectOption(selection, row) {\n      this.selectItemArr = [];\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = selection[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n          this.selectItemArr.push(item.id);\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    },\n    // 删除\n    myDelete: function myDelete() {\n      var selectItemArr = this.selectItemArr;\n      console.log(\"++++++\" + JSON.stringify(selectItemArr));\n\n      if (selectItemArr.length < 1) {\n        this.$Message.warning({\n          content: '请选择项目！'\n        });\n        return;\n      }\n      /*commentDel('/student/delStudentById', selectItemArr).then(res => {\r\n        //console.log(JSON.stringify(res))\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'删除成功！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n          // this.tableData = res.data.result.data.pageList;\r\n      })*/\n\n    },\n    // 删除\n    myDelete1: function myDelete1() {\n      var selectItemArr = this.selectItemArr;\n\n      if (selectItemArr.length < 1) {\n        this.$Message.warning({\n          content: '请选择项目！'\n        });\n        return;\n      }\n\n      this.textModal = true;\n    },\n    delItemOk: function delItemOk() {\n      var _this4 = this;\n\n      var selectItemArr = this.selectItemArr;\n      var customDelText = this.customDelText; //this.delItemStatu = true;\n      //console.log(\"++++++\"+JSON.stringify(customDelText))\n\n      if (customDelText.length < 5) {\n        this.$Message.warning({\n          content: '内容不能少于5个字！'\n        });\n        return;\n      } else if (customDelText.length > 50) {\n        this.$Message.warning({\n          content: '内容不能多于50个字！'\n        });\n      }\n\n      commentDel1('/student/customDel', selectItemArr, customDelText).then(function (res) {\n        //console.log(JSON.stringify(res))\n        if (res.data.success) {\n          _this4.selectItemArr = []; //this.pageInit();\n\n          _this4.recordData = [];\n\n          _this4.tableInit();\n\n          _this4.$Message.success({\n            content: '删除成功！'\n          });\n\n          _this4.textModal = false;\n          _this4.recordModal = false;\n\n          _this4.pageInit();\n        } else if (res.data.errorMsg) {\n          _this4.$Message.warning({\n            content: res.data.errorMsg\n          });\n        } // this.tableData = res.data.result.data.pageList;\n\n      });\n    },\n    // 搜索\n    search: function search() {\n      this.currentPage = 1;\n      this.pageInit();\n    },\n    recordLoadMore: function recordLoadMore() {\n      if (this.tableCurrentPage === this.tableTotalPage) {\n        this.$Message.warning({\n          content: '暂无更多数据'\n        });\n        return;\n      }\n\n      this.tableCurrentPage += 1;\n      this.tableInit();\n    }\n  },\n  mounted: function mounted() {\n    var _this5 = this;\n\n    // 初始化\n    customTableData(10, 1).then(function (res) {\n      console.log(\"----\" + JSON.stringify(res));\n\n      if (res.data.success) {\n        _this5.total = res.data.result.data.totalSize;\n        _this5.tableData = res.data.result.data.pageList;\n      } else if (res.data.errorMsg) {\n        _this5.$Message.warning({\n          content: res.data.errorMsg\n        });\n      }\n    });\n  },\n  computed: {\n    access: function access() {\n      return this.$store.state.user.access;\n    },\n    //所有权限\n    viewAccessAll: function viewAccessAll() {\n      return hasOneOf(['superAdmin', 'teacher', 'student'], this.access);\n    },\n    //部分权限\n    viewAccessTeacher: function viewAccessTeacher() {\n      return hasOneOf(['superAdmin', 'teacher'], this.access);\n    },\n    //部分权限\n    viewTeacher: function viewTeacher() {\n      return hasOneOf(['superAdmin', 'student'], this.access);\n    },\n    //部分权限\n    viewAdmin: function viewAdmin() {\n      return hasOneOf(['superAdmin'], this.access);\n    },\n    //部分权限\n    viewStudent: function viewStudent() {\n      return hasOneOf(['student'], this.access);\n    }\n  }\n};",{"version":3,"sources":["customStudent.vue"],"names":[],"mappings":"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","sourcesContent":["<style>\r\n    .demo-upload-list{\r\n        display: inline-block;\r\n        width: 60px;\r\n        height: 60px;\r\n        text-align: center;\r\n        line-height: 60px;\r\n        border: 1px solid transparent;\r\n        border-radius: 4px;\r\n        overflow: hidden;\r\n        background: #fff;\r\n        position: relative;\r\n        box-shadow: 0 1px 1px rgba(0,0,0,.2);\r\n        margin-right: 4px;\r\n    }\r\n    .demo-upload-list img{\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    .demo-upload-list-cover{\r\n        display: none;\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: rgba(0,0,0,.6);\r\n    }\r\n    .demo-upload-list:hover .demo-upload-list-cover{\r\n        display: block;\r\n    }\r\n    .demo-upload-list-cover i{\r\n        color: #fff;\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n        margin: 0 2px;\r\n    }\r\n</style>\r\n<template>\r\n  <div>\r\n    <Card>\r\n    <Row style=\"margin-bottom: 10px;\">\r\n          <span>关键字：</span>\r\n          <Input placeholder=\"请输入姓名\" v-model.trim='searchText' style=\"width:200px;margin-right:20px;\"></Input>\r\n          <Button type=\"primary\" @click='search'>搜索</Button>\r\n    </Row>\r\n        <Table size=\"large\"  stripe  :columns=\"tableCol\" :data=\"tableData\">\r\n        </Table>\r\n        <Page class='mt-10 text-right' :total=\"total\" :current='currentPage' :page-size='pageSize' @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-sizer show-total/>\r\n    </Card>\r\n    <Modal\r\n      v-model=\"recordModal\"\r\n      title=\"评分详情\"\r\n      @on-cancel=\"closeRecordModal\"\r\n      width =60>\r\n      <Row style=\"background:#eee;padding:0px\">\r\n        <Col  class=\"text-right\">\r\n        <Card class=\"mb-1\" :bordered=\"false\" >\r\n          <component2 v-if=\"viewAdmin\">\r\n            <Button type=\"error\" @click=\"myDelete1\">删除</Button>\r\n          </component2>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n      <Table height=\"300\" @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"recordCol\" :data=\"recordData\"></Table>\r\n      <Button type=\"primary\" icon=\"ios-arrow-dropdown\" ghost long @click=\"recordLoadMore\">加载更多</Button>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeRecordModal\">关闭</Button>\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      v-model=\"textModal\"\r\n      title=\"删除原因\"\r\n      @on-cancel=\"closeTextModal\"\r\n      width =60>\r\n      <Input v-model=\"customDelText\" type=\"textarea\" :rows=\"4\" placeholder=\"请填写原因......\" />\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeTextModal\">关闭</Button>\r\n           <Button type=\"primary\" :disabled='delItemStatu'  @click=\"delItemOk\">确认</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { hasOneOf } from '@/libs/tools'\r\nimport { customTableData,recordTableData,commentDel1} from '@/api/data'\r\nexport default {\r\n  data () {\r\n    return {\r\n      searchText: '', // 搜索内容初始化\r\n      pageSize:10,\r\n      currentPage:1,\r\n      total:1,\r\n\r\n      recordModal:false,     //评分记录模态框\r\n      tableCurrentPage:1,    //评分记录当前页码\r\n      tableTotalPage:1,     //评分记录总页码\r\n      userId:'',      //评分记录用户id\r\n      //customItemArr: [],//评分记录\r\n      customId:'',//评分记录Id\r\n\r\n      textModal:false,     //评分记录模态框\r\n      //delItemStatu:false,\r\n      customDelText:'',\r\n\r\n      formData:{},      //表单信息\r\n\r\n      selectItemArr: [],    // 选中项目id\r\n      tableCol: [\r\n        {\r\n          title: '姓名',\r\n          key: 'name'\r\n        },\r\n        {\r\n          title: '综合评分',\r\n          key: 'customNumPj',\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify(params))\r\n            var oName = params.row.customNumPj+'分';\r\n            return h('div', [\r\n              h('Rate', {\r\n                props: {\r\n                  count: 5,\r\n                  disabled:true,\r\n                  allowHalf:true,\r\n                  showText:true,\r\n                  value:params.row.customNumPj\r\n                }\r\n              }, oName)\r\n            ])\r\n          }\r\n        },\r\n        {\r\n          width:100,\r\n          title: '详情',\r\n          key: 'examineStatus',\r\n          render: (h, params) => {\r\n           // if(this.viewTeacher){\r\n              return h('div', [\r\n               h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'large',\r\n                  vertical:true\r\n                  //disabled:this.viewStudent\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    //console.log(\"++++++\"+JSON.stringify(params))\r\n                    this.userId = params.row.id;\r\n                    this.tableInit();\r\n                    this.recordModal = true;\r\n                  }\r\n                }\r\n              }, '详情')\r\n            ])\r\n           }\r\n        }\r\n      ],\r\n      recordCol:[\r\n        {\r\n          type: 'selection',\r\n          width: 60,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '评分人(老师)',\r\n          key: 'teacherName'\r\n        },\r\n        {\r\n          title: '评价内容',\r\n          key: 'customText'\r\n        },\r\n        {\r\n          title: '评分',\r\n          key: 'customNum',\r\n           render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify(params))\r\n            var oName = params.row.customNum+'分';\r\n            return h('div', [\r\n              h('Rate', {\r\n                props: {\r\n                  count: 5,\r\n                  disabled:true,\r\n                  allowHalf:true,\r\n                  showText:true,\r\n                  value:params.row.customNum\r\n                }\r\n              }, oName)\r\n            ])\r\n          }\r\n        },\r\n      ],\r\n      tableData: [],\r\n      recordData:[]\r\n    }\r\n  },\r\n  methods: {\r\n    async pageInit(){\r\n      customTableData(this.pageSize,this.currentPage,this.startTime,this.endTime,this.searchText).then(res => {\r\n        if(res.data.success){\r\n          this.total = res.data.result.data.totalSize;\r\n          this.tableData = res.data.result.data.pageList;\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    async tableInit(){\r\n      recordTableData(this.userId,this.tableCurrentPage).then(res => {\r\n        //console.log(\"555555\"+JSON.stringify(res));\r\n        this.recordData=[];\r\n        if(res.data.success){\r\n          this.tableCurrentPage = res.data.result.data.currectPage;\r\n          this.tableTotalPage = res.data.result.data.totalPage;\r\n          var dataList = res.data.result.data.pageList;\r\n          var recordO = {};\r\n          for(let item of dataList) {\r\n            recordO = {};\r\n            recordO.id = item.id;\r\n            recordO.customNum = item.customNum;\r\n            recordO.customText = item.customText;\r\n            recordO.teacherName = item.teacherName;\r\n            // recordO.positionAddr = item.lock.positionAddr;\r\n            // recordO.name = item.lock.name;\r\n            this.recordData.push(recordO);\r\n          }\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    changePage(page){\r\n      this.currentPage = page;\r\n      this.pageInit();\r\n    },\r\n    changeSize(size){\r\n      this.pageSize = size;\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    closeRecordModal(){\r\n      this.recordModal = false;\r\n      this.tableCurrentPage = 1;\r\n      this.recordData = [];\r\n    },\r\n    closeTextModal(){\r\n      this.textModal = false;\r\n      this.tableCurrentPage = 1;\r\n      this.recordData = [];\r\n    },\r\n\r\n    // 选中项\r\n    selectOption (selection, row) {\r\n      this.selectItemArr = []\r\n      for (let item of selection) {\r\n        this.selectItemArr.push(item.id)\r\n      }\r\n    },\r\n    // 删除\r\n    myDelete () {\r\n      var selectItemArr = this.selectItemArr\r\n      console.log(\"++++++\"+JSON.stringify(selectItemArr))\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      /*commentDel('/student/delStudentById', selectItemArr).then(res => {\r\n        //console.log(JSON.stringify(res))\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'删除成功！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })*/\r\n    },\r\n    // 删除\r\n    myDelete1 () {\r\n      var selectItemArr = this.selectItemArr\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      this.textModal=true;\r\n    },\r\n    delItemOk(){\r\n       var selectItemArr = this.selectItemArr;\r\n       var customDelText = this.customDelText;\r\n       //this.delItemStatu = true;\r\n       //console.log(\"++++++\"+JSON.stringify(customDelText))\r\n       if(customDelText.length<5){\r\n        this.$Message.warning({\r\n          content:'内容不能少于5个字！'\r\n        })\r\n        return;\r\n      }else if (customDelText.length>50) {\r\n        this.$Message.warning({\r\n          content:'内容不能多于50个字！'\r\n        })\r\n      }\r\n      commentDel1('/student/customDel', selectItemArr,customDelText).then(res => {\r\n        //console.log(JSON.stringify(res))\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          //this.pageInit();\r\n          this.recordData=[];\r\n          this.tableInit();\r\n          this.$Message.success({\r\n            content:'删除成功！'\r\n          });\r\n          this.textModal= false;\r\n          this.recordModal = false;\r\n          this.pageInit();\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })\r\n    },\r\n    // 搜索\r\n    search () {\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    recordLoadMore(){\r\n      if(this.tableCurrentPage === this.tableTotalPage){\r\n        this.$Message.warning({\r\n          content:'暂无更多数据'\r\n        })\r\n        return;\r\n      }\r\n      this.tableCurrentPage += 1;\r\n      this.tableInit();\r\n    }\r\n  },\r\n  mounted () {\r\n    // 初始化\r\n    customTableData(10, 1).then(res => {\r\n       console.log(\"----\"+JSON.stringify(res));\r\n      if(res.data.success){\r\n        this.total = res.data.result.data.totalSize;\r\n        this.tableData = res.data.result.data.pageList;\r\n      }else if(res.data.errorMsg){\r\n        this.$Message.warning({\r\n          content:res.data.errorMsg\r\n        })\r\n      }\r\n    })\r\n  },\r\n  computed: {\r\n    access () {\r\n      return this.$store.state.user.access\r\n    },\r\n    //所有权限\r\n    viewAccessAll () {\r\n      return hasOneOf(['superAdmin', 'teacher','student'], this.access)\r\n    },\r\n    //部分权限\r\n    viewAccessTeacher () {\r\n      return hasOneOf(['superAdmin','teacher'], this.access)\r\n    },\r\n  //部分权限\r\n    viewTeacher () {\r\n      return hasOneOf(['superAdmin','student'], this.access)\r\n    },\r\n    //部分权限\r\n    viewAdmin () {\r\n      return hasOneOf(['superAdmin'], this.access)\r\n    },\r\n    //部分权限\r\n    viewStudent () {\r\n      return hasOneOf(['student'], this.access)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src\\myView\\student"}]}