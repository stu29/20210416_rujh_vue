{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\manager\\manager.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\manager\\manager.vue","mtime":1567648062328},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\.babelrc","mtime":1567648062203},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u8339\\u5BB6\\u8C6A\\\\Desktop\\\\20210416_rujh_vue\\\\20210416_rujh_vue\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ManagerTableData, commentDel, recordTableData, editLandlordData } from '@/api/data';\nexport default {\n  data: function data() {\n    return {\n      // startTime: '', // 入住日期初始化\n      // endTime: '',  // 退房日期初始化\n      searchText: '',\n      // 搜索内容初始化\n      pageSize: 10,\n      currentPage: 1,\n      total: 1,\n      //      recordModal:false,     //记录模态框\n      //      tableCurrentPage:1,    //住房记录当前页码\n      //      tableTotalPage:1,     //住房记录总页码\n      //      userId:'',      //住房记录用户id\n      selectItemArr: [],\n      // 选中项目id\n      tableCol: [{\n        type: 'selection',\n        width: 60,\n        align: 'center'\n      }, {\n        title: '姓名',\n        key: 'name'\n      }, {\n        title: '手机号',\n        key: 'phone'\n      }, {\n        title: '权限内容',\n        key: 'roleName'\n      }],\n      tableData: [\n        /*{\r\n          createTime: '2018-01-03',\r\n          idNumber: '111111111111111111',\r\n          thisHourse: '2',\r\n          phone: '18738790000',\r\n          name: '用户1',\r\n          id: 1\r\n          // record: \"详情\",\r\n        }*/\n      ],\n\n      /*recordCol:[\r\n        {\r\n          title: '管理员名称',\r\n          key: 'userneme'\r\n        },\r\n        {\r\n          title: '房屋地址',\r\n          key: 'positionAddr'\r\n        },\r\n        {\r\n          title: '房屋名称',\r\n          key: 'name'\r\n        },\r\n        {\r\n          title: '入住时间',\r\n          key: 'intime'\r\n        },\r\n        {\r\n          title: '退房时间',\r\n          key: 'outtime'\r\n        },\r\n      ],*/\n      recordData: []\n    };\n  },\n  methods: {\n    pageInit: function () {\n      var _pageInit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                ManagerTableData(this.pageSize, this.currentPage, this.searchText).then(function (res) {\n                  if (res.data.success) {\n                    _this.total = res.data.result.pageBounds.totalSize;\n                    _this.tableData = res.data.result.pageBounds.pageList;\n                  } else if (res.data.errorMsg) {\n                    _this.$Message.warning({\n                      content: res.data.errorMsg\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function pageInit() {\n        return _pageInit.apply(this, arguments);\n      };\n    }(),\n\n    /*async tableInit(){\r\n      recordTableData(this.userId,this.tableCurrentPage).then(res => {\r\n        console.log(\"+++++\"+JSON.stringify(res));\r\n        if(res.data.success){\r\n          this.tableCurrentPage = res.data.result.data.currectPage;\r\n          this.tableTotalPage = res.data.result.data.totalPage;\r\n          var dataList = res.data.result.data.pageList;\r\n          var recordO = {};\r\n          for(let item of dataList) {\r\n            recordO = {};\r\n            recordO.id = item.id;\r\n            recordO.intime = item.intime;\r\n            recordO.outtime = item.outtime;\r\n            recordO.area = item.lock.longAddress;\r\n            recordO.positionAddr = item.lock.positionAddr;\r\n            recordO.name = item.lock.name;\r\n            this.recordData.push(recordO);\r\n          }\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },*/\n    changePage: function changePage(page) {\n      this.currentPage = page;\n      this.pageInit();\n    },\n    changeSize: function changeSize(size) {\n      this.pageSize = size;\n      this.currentPage = 1;\n      this.pageInit();\n    },\n    // 选中项\n    selectOption: function selectOption(selection, row) {\n      this.selectItemArr = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = selection[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          this.selectItemArr.push(item.id);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    // 删除\n    myDelete: function myDelete() {\n      var _this2 = this;\n\n      var selectItemArr = this.selectItemArr;\n\n      if (selectItemArr.length < 1) {\n        this.$Message.warning({\n          content: '请选择项目！'\n        });\n        return;\n      }\n\n      commentDel('/manager/delManager', selectItemArr).then(function (res) {\n        if (res.data.success) {\n          _this2.selectItemArr = [];\n\n          _this2.pageInit();\n\n          _this2.$Message.success({\n            content: '删除成功！'\n          });\n        } else if (res.data.errorMsg) {\n          _this2.$Message.warning({\n            content: res.data.errorMsg\n          });\n        } // this.tableData = res.data.result.data.pageList;\n\n      });\n    },\n    // 入住日期\n    myStartTime: function myStartTime(newTime) {\n      this.startTime = newTime;\n    },\n    // 退房日期\n    myEndTime: function myEndTime(newTime) {\n      this.endTime = newTime;\n    },\n    // 搜索\n    search: function search() {\n      this.currentPage = 1;\n      this.pageInit();\n    },\n\n    /* recordLoadMore(){\r\n       if(this.tableCurrentPage === this.tableTotalPage){\r\n         this.$Message.warning({\r\n           content:'暂无更多数据'\r\n         })\r\n         return;\r\n       }\r\n       this.tableCurrentPage += 1;\r\n       this.tableInit();\r\n     },*/\n    closeRecordModal: function closeRecordModal() {\n      this.recordModal = false;\n      this.tableCurrentPage = 1;\n      this.recordData = [];\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // 初始化\n    ManagerTableData(10, 1).then(function (res) {\n      if (res.data.success) {\n        console.log(\"+++++\" + JSON.stringify(res));\n        _this3.total = res.data.result.pageBounds.totalSize;\n        _this3.tableData = res.data.result.pageBounds.pageList;\n      } else if (res.data.errorMsg) {\n        _this3.$Message.warning({\n          content: res.data.errorMsg\n        });\n      }\n    });\n  }\n};",{"version":3,"sources":["manager.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <Card class=\"mb-10\">\r\n      <Row>\r\n        <Col span=\"12\">\r\n          <h3>管理员管理</h3>\r\n        </Col>\r\n        <Col span=\"12\" class=\"text-right\">\r\n          <Button type=\"error\" @click=\"myDelete\">删除</Button>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n    <Card>\r\n    <Row style=\"margin-bottom: 10px;\">\r\n      <span>关键字：</span>\r\n      <Input placeholder=\"请输入姓名查询\" v-model.trim='searchText' style=\"width:200px;margin-right:20px;\"></Input>\r\n      <Button type=\"primary\" @click='search'>搜索</Button>\r\n    </Row>\r\n        <Table size=\"large\" @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"tableCol\" :data=\"tableData\"></Table>\r\n        <Page class='mt-10 text-right' :total=\"total\" :current='currentPage' :page-size='pageSize' @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-sizer show-total />\r\n    </Card>\r\n    <!-- <Modal\r\n      v-model=\"recordModal\"\r\n      title=\"操作\"\r\n      @on-cancel=\"closeRecordModal\"\r\n      width =60>\r\n      <Table height=\"300\" stripe :columns=\"recordCol\" :data=\"recordData\"></Table>\r\n      <Button type=\"success\" long @click=\"recordLoadMore\">加载更多</Button>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeRecordModal\">关闭</Button>\r\n      </div>\r\n    </Modal> -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { ManagerTableData, commentDel,recordTableData,editLandlordData} from '@/api/data'\r\nexport default {\r\n  data () {\r\n    return {\r\n      // startTime: '', // 入住日期初始化\r\n      // endTime: '',  // 退房日期初始化\r\n      searchText: '', // 搜索内容初始化\r\n      pageSize:10,\r\n      currentPage:1,\r\n      total:1,\r\n\r\n//      recordModal:false,     //记录模态框\r\n//      tableCurrentPage:1,    //住房记录当前页码\r\n//      tableTotalPage:1,     //住房记录总页码\r\n//      userId:'',      //住房记录用户id\r\n\r\n      selectItemArr: [],    // 选中项目id\r\n      tableCol: [\r\n        {\r\n          type: 'selection',\r\n          width: 60,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '姓名',\r\n          key: 'name'\r\n        },\r\n        {\r\n           title: '手机号',\r\n           key: 'phone'\r\n        },\r\n        {\r\n           title: '权限内容',\r\n           key: 'roleName'\r\n        },\r\n        /*{\r\n          title: '操作',\r\n          key: 'examineStatus',\r\n          width:100,\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'large'\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.userId = params.row.id;\r\n                    this.tableInit();\r\n                    this.recordModal = true;\r\n                  }\r\n                }\r\n              }, '详情')\r\n            ])\r\n          }\r\n        }*/\r\n      ],\r\n      tableData: [\r\n        /*{\r\n          createTime: '2018-01-03',\r\n          idNumber: '111111111111111111',\r\n          thisHourse: '2',\r\n          phone: '18738790000',\r\n          name: '用户1',\r\n          id: 1\r\n          // record: \"详情\",\r\n        }*/\r\n      ],\r\n      /*recordCol:[\r\n        {\r\n          title: '管理员名称',\r\n          key: 'userneme'\r\n        },\r\n        {\r\n          title: '房屋地址',\r\n          key: 'positionAddr'\r\n        },\r\n        {\r\n          title: '房屋名称',\r\n          key: 'name'\r\n        },\r\n        {\r\n          title: '入住时间',\r\n          key: 'intime'\r\n        },\r\n        {\r\n          title: '退房时间',\r\n          key: 'outtime'\r\n        },\r\n      ],*/\r\n      recordData:[\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    async pageInit(){\r\n      ManagerTableData(this.pageSize,this.currentPage,this.searchText).then(res => {\r\n        if(res.data.success){\r\n          this.total = res.data.result.pageBounds.totalSize;\r\n          this.tableData = res.data.result.pageBounds.pageList;\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    /*async tableInit(){\r\n      recordTableData(this.userId,this.tableCurrentPage).then(res => {\r\n        console.log(\"+++++\"+JSON.stringify(res));\r\n        if(res.data.success){\r\n          this.tableCurrentPage = res.data.result.data.currectPage;\r\n          this.tableTotalPage = res.data.result.data.totalPage;\r\n          var dataList = res.data.result.data.pageList;\r\n          var recordO = {};\r\n          for(let item of dataList) {\r\n            recordO = {};\r\n            recordO.id = item.id;\r\n            recordO.intime = item.intime;\r\n            recordO.outtime = item.outtime;\r\n            recordO.area = item.lock.longAddress;\r\n            recordO.positionAddr = item.lock.positionAddr;\r\n            recordO.name = item.lock.name;\r\n            this.recordData.push(recordO);\r\n          }\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },*/\r\n    changePage(page){\r\n      this.currentPage = page;\r\n      this.pageInit();\r\n    },\r\n    changeSize(size){\r\n      this.pageSize = size;\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    // 选中项\r\n    selectOption (selection, row) {\r\n      this.selectItemArr = []\r\n      for (let item of selection) {\r\n        this.selectItemArr.push(item.id)\r\n      }\r\n    },\r\n    // 删除\r\n    myDelete () {\r\n      var selectItemArr = this.selectItemArr\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      commentDel('/manager/delManager', selectItemArr).then(res => {\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'删除成功！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })\r\n    },\r\n    // 入住日期\r\n    myStartTime (newTime) {\r\n      this.startTime = newTime\r\n    },\r\n    // 退房日期\r\n    myEndTime (newTime) {\r\n      this.endTime = newTime\r\n    },\r\n    // 搜索\r\n    search () {\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n   /* recordLoadMore(){\r\n      if(this.tableCurrentPage === this.tableTotalPage){\r\n        this.$Message.warning({\r\n          content:'暂无更多数据'\r\n        })\r\n        return;\r\n      }\r\n      this.tableCurrentPage += 1;\r\n      this.tableInit();\r\n    },*/\r\n    closeRecordModal(){\r\n      this.recordModal = false;\r\n      this.tableCurrentPage = 1;\r\n      this.recordData = [];\r\n    }\r\n\r\n  },\r\n  mounted () {\r\n    // 初始化\r\n    ManagerTableData(10, 1).then(res => {\r\n      if(res.data.success){\r\n        console.log(\"+++++\"+JSON.stringify(res))\r\n        this.total = res.data.result.pageBounds.totalSize;\r\n        this.tableData = res.data.result.pageBounds.pageList;\r\n      }else if(res.data.errorMsg){\r\n        this.$Message.warning({\r\n          content:res.data.errorMsg\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src\\myView\\manager"}]}