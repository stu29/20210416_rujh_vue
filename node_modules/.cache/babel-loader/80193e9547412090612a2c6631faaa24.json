{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\teacher\\teacher.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\teacher\\teacher.vue","mtime":1618972263960},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\.babelrc","mtime":1567648062203},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u8339\\u5BB6\\u8C6A\\\\Desktop\\\\20210416_rujh_vue\\\\20210416_rujh_vue\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { hasOneOf } from '@/libs/tools';\nimport { teacherTableData, updateTeacher, commentDel, addTeacher, getAllClass } from '@/api/data';\nexport default {\n  data: function data() {\n    var _this = this;\n\n    return {\n      startTime: '',\n      // 日期初始化\n      endTime: '',\n      // 日期初始化\n      searchText: '',\n      // 搜索内容初始化\n      pageSize: 10,\n      currentPage: 1,\n      total: 1,\n      formData: {},\n      //表单信息\n      addUser: true,\n      //是否为新增用户\n      upLoadPic: false,\n      // 照片上传模态框\n      picture: [],\n      //照片上传\n      teacherId: 0,\n      //照片上传参数\n      saveItem: false,\n      //保存操作框\n      saveItemStatu: false,\n      //保存点击状态\n      itemTitle: '新建教师',\n      //保存操作框title\n      selectItemArr: [],\n      // 选中项目id\n      tableCol: [{\n        type: 'selection',\n        width: 60,\n        align: 'center'\n      }, {\n        title: '注册时间',\n        key: 'createTimeStr'\n      }, {\n        title: '姓名',\n        key: 'name'\n      }, {\n        title: '手机号',\n        key: 'phone'\n      }, {\n        title: '主教课程',\n        key: 'classEnumString'\n      }, {\n        title: '任教班级',\n        key: 'courses',\n        render: function render(h, params) {\n          // console.log('++++++' + JSON.stringify(params))\n          var oName = params.row.courses;\n          var sName = '';\n\n          for (var i in oName) {\n            sName += oName[i].className + '\\n';\n          }\n\n          return h('div', [h('span', {}, sName)]);\n        }\n      }, {\n        width: 100,\n        title: '操作',\n        key: 'examineStatus',\n        checkAccess: ['superAdmin'],\n        render: function render(h, params) {\n          return h('div', [h('Button', {\n            props: {\n              type: 'primary',\n              size: 'large',\n              disabled: _this.viewAccessTeacher\n            },\n            on: {\n              click: function click() {\n                var getData = JSON.parse(JSON.stringify(_this.tableData[params.index]));\n                _this.formData = getData;\n                _this.itemTitle = '编辑教师信息';\n\n                if (_this.formData.courses.length > 0) {\n                  for (var j in _this.formData.courses) {\n                    _this.targetKeys.push(_this.formData.courses[j].id);\n                  }\n                }\n\n                _this.addUser = false;\n                _this.saveItem = true;\n\n                if (_this.cityList.length >= 1) {\n                  return;\n                }\n\n                getAllClass().then(function (res) {\n                  if (res.data.success) {\n                    _this.cityList = res.data.result.clasies; // this.classList = res.data.result.courses;\n                    // console.log(JSON.stringify(this.classList)) ;\n\n                    var coursesArr = res.data.result.courses;\n\n                    for (var i in coursesArr) {\n                      var objCourses = {};\n                      objCourses.key = coursesArr[i].id;\n                      objCourses.label = coursesArr[i].className;\n\n                      _this.coursesList.push(objCourses);\n                    }\n                  } else if (res.data.errorMsg) {\n                    _this.$Message.warning({\n                      content: res.data.errorMsg\n                    }, console.log(_this.$Message.warning()));\n                  }\n                });\n              }\n            }\n          }, '编辑')]);\n        }\n      }],\n      tableData: [],\n      // 图片上传\n      defaultList: [\n        /*{\r\n              'name': '98310050-e068-4417-973b-6e3160179084.jpg',\r\n              'url': 'http://localhost:8081/picture/98310050-e068-4417-973b-6e3160179084.jpg'\r\n          },\r\n          {\r\n              'name': 'bc7521e033abdd1e92222d733590f104',\r\n              'url': 'https://o5wwk8baw.qnssl.com/bc7521e033abdd1e92222d733590f104/avatar'\r\n          }*/\n      ],\n      imgName: '',\n      picShow: false,\n      uploadList: [],\n      cityList: [],\n      coursesList: [],\n      targetKeys: [],\n      listStyle: {\n        width: '150px',\n        height: '200px'\n      }\n    };\n  },\n  methods: {\n    pageInit: function () {\n      var _pageInit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                teacherTableData(this.pageSize, this.currentPage, this.startTime, this.endTime, this.searchText).then(function (res) {\n                  if (res.data.success) {\n                    _this2.total = res.data.result.data.totalSize;\n                    _this2.tableData = res.data.result.data.pageList;\n                  } else if (res.data.errorMsg) {\n                    _this2.$Message.warning({\n                      content: res.data.errorMsg\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function pageInit() {\n        return _pageInit.apply(this, arguments);\n      };\n    }(),\n    changePage: function changePage(page) {\n      this.currentPage = page;\n      this.pageInit();\n    },\n    changeSize: function changeSize(size) {\n      this.pageSize = size;\n      this.currentPage = 1;\n      this.pageInit();\n    },\n    addItem: function addItem() {\n      var _this3 = this;\n\n      this.formData = {};\n      this.itemTitle = '添加教师';\n      this.addUser = true;\n      this.saveItem = true;\n\n      if (this.cityList.length >= 1) {\n        return;\n      }\n\n      getAllClass().then(function (res) {\n        if (res.data.success) {\n          _this3.cityList = res.data.result.clasies; //this.classList = res.data.result.courses;\n          // console.log(JSON.stringify(\"+++\"+this.classList))\n\n          var coursesArr = res.data.result.courses;\n\n          for (var i in coursesArr) {\n            var objCourses = {};\n            objCourses.key = coursesArr[i].id;\n            objCourses.label = coursesArr[i].className;\n\n            _this3.coursesList.push(objCourses);\n          }\n        } else {\n          _this3.$Message.warning({\n            content: res.data.errorMsg\n          });\n        }\n      });\n    },\n\n    /* closeUpload(){\r\n      alert(1);\r\n      this.upLoadPic = false;\r\n      this.defaultList=[];\r\n      this.uploadList=[];\r\n    },*/\n    // 关闭保存项目模态框\n    closeSaveItem: function closeSaveItem() {\n      this.formData = {};\n      this.saveItem = false;\n      this.targetKeys = [];\n    },\n    saveItemOk: function saveItemOk() {\n      var _this4 = this;\n\n      var that = this;\n      var formData = this.formData; //console.log(JSON.stringify(formData))\n\n      if (!formData.name) {\n        this.$Message.warning({\n          content: '请填写您的姓名！'\n        });\n        return;\n      } else if (!/[\\u4e00-\\u9fa5_a-zA-Z]+$/.test(formData.name)) {\n        this.$Message.warning({\n          content: '请填写正确的姓名'\n        });\n        return;\n      }\n\n      if (!formData.phone) {\n        this.$Message.warning({\n          content: '请填写您的手机号'\n        });\n        return;\n      } else if (!/^1(3|4|5|6|7|8)\\d{9}$/.test(formData.phone)) {\n        this.$Message.warning({\n          content: '请填写正确的手机号'\n        });\n        return;\n      }\n\n      if (this.addUser) {\n        if (!formData.password) {\n          this.$Message.warning({\n            content: '请填写您的密码！'\n          });\n          return;\n        } else if (!/^[\\w_-]{5,11}$/.test(formData.password)) {\n          this.$Message.warning({\n            content: '请填写5-11密码'\n          });\n          return;\n        }\n\n        if (!formData.confirmPwd) {\n          this.$Message.warning({\n            content: '请确认您的密码！'\n          });\n          return;\n        } else if (formData.confirmPwd !== formData.password) {\n          this.$Message.warning({\n            content: '两次密码请保持一致'\n          });\n          return;\n        }\n\n        if (!formData.subjectId) {\n          this.$Message.warning({\n            content: '请选择任教课程'\n          });\n          return;\n        }\n\n        if (!this.targetKeys) {\n          this.$Message.warning({\n            content: '请选择任教班级'\n          });\n          return;\n        }\n\n        addTeacher(this.formData, this.targetKeys).then(function (res) {\n          // console.log(JSON.stringify(res))\n          if (res.data.result && res.data.result.error) {\n            _this4.$Message.warning({\n              content: res.data.result.error\n            });\n\n            return;\n          } else if (res.data.success) {\n            _this4.$Message.success({\n              content: '保存用户成功'\n            });\n\n            that.saveItem = false;\n            that.pageInit();\n          } else if (res.data.errorMsg) {\n            _this4.$Message.warning({\n              content: res.data.errorMsg\n            });\n          }\n\n          that.saveItemStatu = false;\n        });\n      } else {\n        this.saveItemStatu = true;\n        updateTeacher(this.formData, this.targetKeys).then(function (res) {\n          // var that = this;\n          that.saveItemStatu = false;\n\n          if (res.data.success) {\n            _this4.$Message.success({\n              content: '修改用户成功'\n            });\n\n            that.saveItem = false;\n            that.pageInit();\n          } else if (res.data.errorMsg) {\n            _this4.$Message.warning({\n              content: res.data.errorMsg\n            });\n          }\n        });\n      }\n    },\n    // 选中项\n    selectOption: function selectOption(selection, row) {\n      this.selectItemArr = [];\n      console.log(selection);\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = selection[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          this.selectItemArr.push(item.id);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    // 删除\n    myDelete: function myDelete() {\n      var _this5 = this;\n\n      var selectItemArr = this.selectItemArr;\n\n      if (selectItemArr.length < 1) {\n        this.$Message.warning({\n          content: '请选择项目！'\n        });\n        return;\n      }\n\n      commentDel('/teacher/delTeacherById', selectItemArr).then(function (res) {\n        console.log(JSON.stringify(res));\n\n        if (res.data.success) {\n          _this5.selectItemArr = [];\n\n          _this5.pageInit();\n\n          _this5.$Message.success({\n            content: '删除成功！'\n          });\n        } else if (res.data.errorMsg) {\n          _this5.$Message.warning({\n            content: res.data.errorMsg\n          });\n        } // this.tableData = res.data.result.data.pageList;\n\n      });\n    },\n    // 开始日期\n    myStartTime: function myStartTime(newTime) {\n      this.startTime = newTime;\n    },\n    // 结束日期\n    myEndTime: function myEndTime(newTime) {\n      this.endTime = newTime;\n    },\n    // 搜索\n    search: function search() {\n      this.currentPage = 1;\n      this.pageInit();\n    },\n    handleChange: function handleChange(newTargetKeys) {\n      this.targetKeys = newTargetKeys;\n    },\n    render: function render(item) {\n      return item.label;\n    },\n    reloadMockData: function reloadMockData() {\n      this.transfer = this.getMockData();\n      this.targetKeys = this.getTargetKeys();\n    }\n  },\n  mounted: function mounted() {\n    var _this6 = this;\n\n    // 初始化\n    teacherTableData(10, 1).then(function (res) {\n      //   console.log('----' + JSON.stringify(res))\n      if (res.data.success) {\n        _this6.total = res.data.result.data.totalSize;\n        _this6.tableData = res.data.result.data.pageList;\n      } else if (res.data.errorMsg) {\n        _this6.$Message.warning({\n          content: res.data.errorMsg\n        });\n      }\n    }); // 图片上传\n    // this.uploadList = this.$refs.upload.fileList;\n  },\n  computed: {\n    access: function access() {\n      return this.$store.state.user.access;\n    },\n    //所有权限\n    viewAccessAll: function viewAccessAll() {\n      return hasOneOf(['superAdmin', 'teacher', 'student'], this.access);\n    },\n    //部分权限\n    viewAccessTeacher: function viewAccessTeacher() {\n      return hasOneOf(['teacher', 'student'], this.access);\n    },\n    Super: function Super() {\n      return hasOneOf(['superAdmin'], this.access);\n    }\n  }\n};",{"version":3,"sources":["teacher.vue"],"names":[],"mappings":"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","sourcesContent":["<style>\r\n.demo-upload-list {\r\n  display: inline-block;\r\n  width: 60px;\r\n  height: 60px;\r\n  text-align: center;\r\n  line-height: 60px;\r\n  border: 1px solid transparent;\r\n  border-radius: 4px;\r\n  overflow: hidden;\r\n  background: #fff;\r\n  position: relative;\r\n  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);\r\n  margin-right: 4px;\r\n}\r\n.demo-upload-list img {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.demo-upload-list-cover {\r\n  display: none;\r\n  position: absolute;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n  background: rgba(0, 0, 0, 0.6);\r\n}\r\n.demo-upload-list:hover .demo-upload-list-cover {\r\n  display: block;\r\n}\r\n.demo-upload-list-cover i {\r\n  color: #fff;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  margin: 0 2px;\r\n}\r\n</style>\r\n<template>\r\n  <div>\r\n    <Card class=\"mb-10\">\r\n      <Row>\r\n        <Col span=\"12\">\r\n        <h3>教师管理</h3>\r\n        </Col>\r\n        <Col span=\"12\"\r\n             class=\"text-right\">\r\n        <component2 v-if=\"Super\">\r\n          <Button type=\"primary\"\r\n                  @click='addItem'\r\n                  class=\"mr-10\">新建</Button>\r\n        </component2>\r\n        <component2 v-if=\"Super\">\r\n          <Button type=\"error\"\r\n                  @click=\"myDelete\">删除</Button>\r\n        </component2>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n    <Card>\r\n      <Row style=\"margin-bottom: 10px;\">\r\n        <span>日期范围：</span>\r\n        <DatePicker style=\"width:160px\"\r\n                    type=\"date\"\r\n                    format=\"yyyy-MM-dd\"\r\n                    :value='startTime'\r\n                    @on-change='myStartTime'\r\n                    placeholder=\"开始日期\"></DatePicker>\r\n        <span>~</span>\r\n        <DatePicker style=\"width:160px;margin-right:20px;\"\r\n                    type=\"date\"\r\n                    format=\"yyyy-MM-dd\"\r\n                    :value='endTime'\r\n                    @on-change='myEndTime'\r\n                    placeholder=\"结束日期\"></DatePicker>\r\n        <span>关键字：</span>\r\n        <Input placeholder=\"请输入姓名/手机号\"\r\n               v-model.trim='searchText'\r\n               style=\"width:200px;margin-right:20px;\"></Input>\r\n        <Button type=\"primary\"\r\n                @click='search'>搜索</Button>\r\n      </Row>\r\n      <Table size=\"large\"\r\n             @on-selection-change=\"selectOption\"\r\n             stripe\r\n             ref=\"selection\"\r\n             :columns=\"tableCol\"\r\n             :data=\"tableData\">\r\n      </Table>\r\n      <Page class='mt-10 text-right'\r\n            :total=\"total\"\r\n            :current='currentPage'\r\n            :page-size='pageSize'\r\n            @on-change=\"changePage\"\r\n            @on-page-size-change=\"changeSize\"\r\n            show-sizer\r\n            show-total />\r\n    </Card>\r\n    <Modal v-model=\"saveItem\"\r\n           :title=\"itemTitle\"\r\n           @on-cancel='closeSaveItem'>\r\n      <Form ref=\"formData\"\r\n            :model=\"formData\"\r\n            :label-width=\"80\">\r\n        <input type=\"hidden\"\r\n               name='id'\r\n               v-model=\"formData.id\">\r\n        <FormItem label=\"姓名\">\r\n          <Input v-model=\"formData.name\"\r\n                 placeholder=\"请填写您的姓名\"\r\n                 :maxlength=\"10\"></Input>\r\n        </FormItem>\r\n        <span style=\"color: red;margin-left: 80px;font-size:5px\">*手机号为您的登录账号*</span>\r\n        <FormItem label=\"手机号\">\r\n          <Input v-model=\"formData.phone\"\r\n                 placeholder=\"请填写您的手机号码\"\r\n                 :maxlength=\"11\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"密码\"\r\n                  v-if='addUser'>\r\n          <Input type='password'\r\n                 v-model=\"formData.password\"\r\n                 placeholder=\"请填写您的密码\"\r\n                 :maxlength=\"11\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"确认密码\"\r\n                  v-if='addUser'>\r\n          <Input type='password'\r\n                 v-model=\"formData.confirmPwd\"\r\n                 placeholder=\"请确认密码\"\r\n                 :maxlength=\"11\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"任教课程\">\r\n          <Row>\r\n            <Col span=\"12\"\r\n                 style=\"padding-right:10px\">\r\n            <Select v-model=\"formData.subjectId\"\r\n                    filterable>\r\n              <Option v-for=\"item in cityList\"\r\n                      :value=\"item.id\"\r\n                      :key=\"item.id\">{{ item.name }}</Option>\r\n            </Select>\r\n            </Col>\r\n          </Row>\r\n        </FormItem>\r\n        <FormItem label=\"任教班级\">\r\n          <Transfer :data=\"coursesList\"\r\n                    :targetKeys=\"targetKeys\"\r\n                    :list-style=\"listStyle\"\r\n                    :render-format=\"render\"\r\n                    :operations=\"['移除','添加']\"\r\n                    filterable\r\n                    @on-change=\"handleChange\">\r\n          </Transfer>\r\n        </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n        <Button type=\"default\"\r\n                @click=\"closeSaveItem\">关闭</Button>\r\n        <Button type=\"primary\"\r\n                :disabled='saveItemStatu'\r\n                @click=\"saveItemOk\">确认</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { hasOneOf } from '@/libs/tools'\r\nimport {\r\n  teacherTableData,\r\n  updateTeacher,\r\n  commentDel,\r\n  addTeacher,\r\n  getAllClass,\r\n} from '@/api/data'\r\nexport default {\r\n  data() {\r\n    return {\r\n      startTime: '', // 日期初始化\r\n      endTime: '', // 日期初始化\r\n      searchText: '', // 搜索内容初始化\r\n      pageSize: 10,\r\n      currentPage: 1,\r\n      total: 1,\r\n\r\n      formData: {}, //表单信息\r\n      addUser: true, //是否为新增用户\r\n\r\n      upLoadPic: false, // 照片上传模态框\r\n      picture: [], //照片上传\r\n      teacherId: 0, //照片上传参数\r\n\r\n      saveItem: false, //保存操作框\r\n      saveItemStatu: false, //保存点击状态\r\n      itemTitle: '新建教师', //保存操作框title\r\n\r\n      selectItemArr: [], // 选中项目id\r\n      tableCol: [\r\n        {\r\n          type: 'selection',\r\n          width: 60,\r\n          align: 'center',\r\n        },\r\n        {\r\n          title: '注册时间',\r\n          key: 'createTimeStr',\r\n        },\r\n        {\r\n          title: '姓名',\r\n          key: 'name',\r\n        },\r\n        {\r\n          title: '手机号',\r\n          key: 'phone',\r\n        },\r\n        {\r\n          title: '主教课程',\r\n          key: 'classEnumString',\r\n        },\r\n        {\r\n          title: '任教班级',\r\n          key: 'courses',\r\n          render: (h, params) => {\r\n            // console.log('++++++' + JSON.stringify(params))\r\n            var oName = params.row.courses\r\n            var sName = ''\r\n            for (var i in oName) {\r\n              sName += oName[i].className + '\\n'\r\n            }\r\n            return h('div', [h('span', {}, sName)])\r\n          },\r\n        },\r\n        {\r\n          width: 100,\r\n          title: '操作',\r\n          key: 'examineStatus',\r\n          checkAccess: ['superAdmin'],\r\n          render: (h, params) => {\r\n            return h('div', [\r\n              h(\r\n                'Button',\r\n                {\r\n                  props: {\r\n                    type: 'primary',\r\n                    size: 'large',\r\n                    disabled: this.viewAccessTeacher,\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      let getData = JSON.parse(\r\n                        JSON.stringify(this.tableData[params.index])\r\n                      )\r\n                      this.formData = getData\r\n                      this.itemTitle = '编辑教师信息'\r\n                      if (this.formData.courses.length > 0) {\r\n                        for (var j in this.formData.courses) {\r\n                          this.targetKeys.push(this.formData.courses[j].id)\r\n                        }\r\n                      }\r\n\r\n                      this.addUser = false\r\n                      this.saveItem = true\r\n                      if (this.cityList.length >= 1) {\r\n                        return\r\n                      }\r\n\r\n                      getAllClass().then((res) => {\r\n                        if (res.data.success) {\r\n                          this.cityList = res.data.result.clasies\r\n                          // this.classList = res.data.result.courses;\r\n                          // console.log(JSON.stringify(this.classList)) ;\r\n                          var coursesArr = res.data.result.courses\r\n                          for (var i in coursesArr) {\r\n                            var objCourses = {}\r\n                            objCourses.key = coursesArr[i].id\r\n                            objCourses.label = coursesArr[i].className\r\n                            this.coursesList.push(objCourses)\r\n                          }\r\n                        } else if (res.data.errorMsg) {\r\n                          this.$Message.warning(\r\n                            {\r\n                              content: res.data.errorMsg,\r\n                            },\r\n                            console.log(this.$Message.warning())\r\n                          )\r\n                        }\r\n                      })\r\n                    },\r\n                  },\r\n                },\r\n                '编辑'\r\n              ),\r\n            ])\r\n          },\r\n        },\r\n      ],\r\n      tableData: [],\r\n\r\n      // 图片上传\r\n      defaultList: [\r\n        /*{\r\n              'name': '98310050-e068-4417-973b-6e3160179084.jpg',\r\n              'url': 'http://localhost:8081/picture/98310050-e068-4417-973b-6e3160179084.jpg'\r\n          },\r\n          {\r\n              'name': 'bc7521e033abdd1e92222d733590f104',\r\n              'url': 'https://o5wwk8baw.qnssl.com/bc7521e033abdd1e92222d733590f104/avatar'\r\n          }*/\r\n      ],\r\n      imgName: '',\r\n      picShow: false,\r\n      uploadList: [],\r\n      cityList: [],\r\n      coursesList: [],\r\n      targetKeys: [],\r\n      listStyle: {\r\n        width: '150px',\r\n        height: '200px',\r\n      },\r\n    }\r\n  },\r\n  methods: {\r\n    async pageInit() {\r\n      teacherTableData(\r\n        this.pageSize,\r\n        this.currentPage,\r\n        this.startTime,\r\n        this.endTime,\r\n        this.searchText\r\n      ).then((res) => {\r\n        if (res.data.success) {\r\n          this.total = res.data.result.data.totalSize\r\n          this.tableData = res.data.result.data.pageList\r\n        } else if (res.data.errorMsg) {\r\n          this.$Message.warning({\r\n            content: res.data.errorMsg,\r\n          })\r\n        }\r\n      })\r\n    },\r\n    changePage(page) {\r\n      this.currentPage = page\r\n      this.pageInit()\r\n    },\r\n    changeSize(size) {\r\n      this.pageSize = size\r\n      this.currentPage = 1\r\n      this.pageInit()\r\n    },\r\n    addItem() {\r\n      this.formData = {}\r\n      this.itemTitle = '添加教师'\r\n      this.addUser = true\r\n      this.saveItem = true\r\n      if (this.cityList.length >= 1) {\r\n        return\r\n      }\r\n      getAllClass().then((res) => {\r\n        if (res.data.success) {\r\n          this.cityList = res.data.result.clasies\r\n          //this.classList = res.data.result.courses;\r\n          // console.log(JSON.stringify(\"+++\"+this.classList))\r\n          var coursesArr = res.data.result.courses\r\n          for (var i in coursesArr) {\r\n            var objCourses = {}\r\n            objCourses.key = coursesArr[i].id\r\n            objCourses.label = coursesArr[i].className\r\n            this.coursesList.push(objCourses)\r\n          }\r\n        } else {\r\n          this.$Message.warning({\r\n            content: res.data.errorMsg,\r\n          })\r\n        }\r\n      })\r\n    },\r\n    /* closeUpload(){\r\n      alert(1);\r\n      this.upLoadPic = false;\r\n      this.defaultList=[];\r\n      this.uploadList=[];\r\n    },*/\r\n    // 关闭保存项目模态框\r\n    closeSaveItem() {\r\n      this.formData = {}\r\n      this.saveItem = false\r\n      this.targetKeys = []\r\n    },\r\n    saveItemOk() {\r\n      var that = this\r\n      var formData = this.formData\r\n      //console.log(JSON.stringify(formData))\r\n      if (!formData.name) {\r\n        this.$Message.warning({\r\n          content: '请填写您的姓名！',\r\n        })\r\n        return\r\n      } else if (!/[\\u4e00-\\u9fa5_a-zA-Z]+$/.test(formData.name)) {\r\n        this.$Message.warning({\r\n          content: '请填写正确的姓名',\r\n        })\r\n        return\r\n      }\r\n\r\n      if (!formData.phone) {\r\n        this.$Message.warning({\r\n          content: '请填写您的手机号',\r\n        })\r\n        return\r\n      } else if (!/^1(3|4|5|6|7|8)\\d{9}$/.test(formData.phone)) {\r\n        this.$Message.warning({\r\n          content: '请填写正确的手机号',\r\n        })\r\n        return\r\n      }\r\n\r\n      if (this.addUser) {\r\n        if (!formData.password) {\r\n          this.$Message.warning({\r\n            content: '请填写您的密码！',\r\n          })\r\n          return\r\n        } else if (!/^[\\w_-]{5,11}$/.test(formData.password)) {\r\n          this.$Message.warning({\r\n            content: '请填写5-11密码',\r\n          })\r\n          return\r\n        }\r\n        if (!formData.confirmPwd) {\r\n          this.$Message.warning({\r\n            content: '请确认您的密码！',\r\n          })\r\n          return\r\n        } else if (formData.confirmPwd !== formData.password) {\r\n          this.$Message.warning({\r\n            content: '两次密码请保持一致',\r\n          })\r\n          return\r\n        }\r\n\r\n        if (!formData.subjectId) {\r\n          this.$Message.warning({\r\n            content: '请选择任教课程',\r\n          })\r\n          return\r\n        }\r\n\r\n        if (!this.targetKeys) {\r\n          this.$Message.warning({\r\n            content: '请选择任教班级',\r\n          })\r\n          return\r\n        }\r\n        addTeacher(this.formData, this.targetKeys).then((res) => {\r\n          // console.log(JSON.stringify(res))\r\n          if (res.data.result && res.data.result.error) {\r\n            this.$Message.warning({\r\n              content: res.data.result.error,\r\n            })\r\n            return\r\n          } else if (res.data.success) {\r\n            this.$Message.success({\r\n              content: '保存用户成功',\r\n            })\r\n            that.saveItem = false\r\n            that.pageInit()\r\n          } else if (res.data.errorMsg) {\r\n            this.$Message.warning({\r\n              content: res.data.errorMsg,\r\n            })\r\n          }\r\n          that.saveItemStatu = false\r\n        })\r\n      } else {\r\n        this.saveItemStatu = true\r\n        updateTeacher(this.formData, this.targetKeys).then((res) => {\r\n          // var that = this;\r\n          that.saveItemStatu = false\r\n          if (res.data.success) {\r\n            this.$Message.success({\r\n              content: '修改用户成功',\r\n            })\r\n            that.saveItem = false\r\n            that.pageInit()\r\n          } else if (res.data.errorMsg) {\r\n            this.$Message.warning({\r\n              content: res.data.errorMsg,\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 选中项\r\n    selectOption(selection, row) {\r\n      this.selectItemArr = []\r\n      console.log(selection)\r\n      for (let item of selection) {\r\n        this.selectItemArr.push(item.id)\r\n      }\r\n    },\r\n    // 删除\r\n    myDelete() {\r\n      var selectItemArr = this.selectItemArr\r\n      if (selectItemArr.length < 1) {\r\n        this.$Message.warning({\r\n          content: '请选择项目！',\r\n        })\r\n        return\r\n      }\r\n      commentDel('/teacher/delTeacherById', selectItemArr).then((res) => {\r\n        console.log(JSON.stringify(res))\r\n        if (res.data.success) {\r\n          this.selectItemArr = []\r\n          this.pageInit()\r\n          this.$Message.success({\r\n            content: '删除成功！',\r\n          })\r\n        } else if (res.data.errorMsg) {\r\n          this.$Message.warning({\r\n            content: res.data.errorMsg,\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })\r\n    },\r\n    // 开始日期\r\n    myStartTime(newTime) {\r\n      this.startTime = newTime\r\n    },\r\n    // 结束日期\r\n    myEndTime(newTime) {\r\n      this.endTime = newTime\r\n    },\r\n    // 搜索\r\n    search() {\r\n      this.currentPage = 1\r\n      this.pageInit()\r\n    },\r\n    handleChange(newTargetKeys) {\r\n      this.targetKeys = newTargetKeys\r\n    },\r\n    render(item) {\r\n      return item.label\r\n    },\r\n    reloadMockData() {\r\n      this.transfer = this.getMockData()\r\n      this.targetKeys = this.getTargetKeys()\r\n    },\r\n  },\r\n  mounted() {\r\n    // 初始化\r\n    teacherTableData(10, 1).then((res) => {\r\n      //   console.log('----' + JSON.stringify(res))\r\n      if (res.data.success) {\r\n        this.total = res.data.result.data.totalSize\r\n        this.tableData = res.data.result.data.pageList\r\n      } else if (res.data.errorMsg) {\r\n        this.$Message.warning({\r\n          content: res.data.errorMsg,\r\n        })\r\n      }\r\n    })\r\n    // 图片上传\r\n    // this.uploadList = this.$refs.upload.fileList;\r\n  },\r\n  computed: {\r\n    access() {\r\n      return this.$store.state.user.access\r\n    },\r\n    //所有权限\r\n    viewAccessAll() {\r\n      return hasOneOf(['superAdmin', 'teacher', 'student'], this.access)\r\n    },\r\n    //部分权限\r\n    viewAccessTeacher() {\r\n      return hasOneOf(['teacher', 'student'], this.access)\r\n    },\r\n    Super() {\r\n      return hasOneOf(['superAdmin'], this.access)\r\n    },\r\n  },\r\n}\r\n</script>\r\n"],"sourceRoot":"src\\myView\\teacher"}]}