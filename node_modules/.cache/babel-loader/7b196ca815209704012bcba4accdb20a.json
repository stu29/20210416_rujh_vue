{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\notice\\notice.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\notice\\notice.vue","mtime":1567648062328},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\.babelrc","mtime":1567648062203},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u8339\\u5BB6\\u8C6A\\\\Desktop\\\\20210416_rujh_vue\\\\20210416_rujh_vue\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { hasOneOf, oneOf } from '@/libs/tools';\nimport { NoticeTableData, commentDel, getManagerName, addNotice, getStudentName } from '@/api/data';\nexport default {\n  data: function data() {\n    return {\n      startTime: '',\n      // 入住日期初始化\n      endTime: '',\n      // 退房日期初始化\n      searchText: '',\n      // 搜索内容初始化\n      pageSize: 10,\n      currentPage: 1,\n      total: 1,\n      loading1: false,\n      options1: [],\n      managerNames: [],\n      targetKeys: [],\n      listStyle: {\n        width: '130px',\n        height: '200px'\n      },\n      courseList: [],\n      buttonState: 0,\n      formData: {\n        state: 0\n      },\n      //表单信息\n      addUser: true,\n      //是否为新增\n      selectItemArr: [],\n      // 选中项目id\n      //mainTeacher:0,\n      saveItem: false,\n      //保存操作框\n      saveItemStatu: false,\n      //保存点击状态\n      itemTitle: '创建通告/公告',\n      tableCol: [{\n        type: 'selection',\n        width: 60,\n        align: 'center'\n      }, {\n        title: '内容',\n        key: 'notice'\n      }, {\n        title: '创建时间',\n        key: 'createTimeStr'\n      }, {\n        title: '通知人',\n        key: 'name',\n        render: function render(h, params) {\n          // console.log(\"++++++\"+JSON.stringify(params.row.name))\n          var oName = params.row.name;\n\n          if (oName === null) {\n            oName = \"此通告没有通知人\";\n          }\n\n          return h('div', [h('span', {}, oName)]);\n        }\n      }, {\n        title: '通知类型',\n        key: 'roseStr'\n      }],\n      tableData: []\n    };\n  },\n  methods: {\n    pageInit: function () {\n      var _pageInit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                NoticeTableData(this.pageSize, this.currentPage, this.startTime, this.endTime, this.searchText, null).then(function (res) {\n                  if (res.data.success) {\n                    _this.total = res.data.result.pageBounds.totalSize;\n                    _this.tableData = res.data.result.pageBounds.pageList;\n                  } else if (res.data.errorMsg) {\n                    _this.$Message.warning({\n                      content: res.data.errorMsg\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function pageInit() {\n        return _pageInit.apply(this, arguments);\n      };\n    }(),\n    changePage: function changePage(page) {\n      this.currentPage = page;\n      this.pageInit();\n    },\n    changeSize: function changeSize(size) {\n      this.pageSize = size;\n      this.currentPage = 1;\n      this.pageInit();\n    },\n    addItem: function addItem() {\n      var _this2 = this;\n\n      this.formData = {};\n      this.formData.state = 0;\n      this.itemTitle = '添加通知/公告'; //this.addUser = true;\n\n      this.saveItem = true;\n\n      if (this.managerNames.length >= 1) {\n        return;\n      }\n\n      ;\n      getManagerName(null).then(function (res) {\n        if (res.data.success) {\n          //this.managerNames = res.data.result.managerNames;\n          var managerNamesArr = res.data.result.managerNames;\n\n          for (var i in managerNamesArr) {\n            var objCourses = {};\n            objCourses.key = managerNamesArr[i].id;\n            objCourses.label = managerNamesArr[i].name;\n\n            _this2.managerNames.push(objCourses);\n          }\n\n          ;\n        }\n      });\n    },\n    addItem1: function addItem1() {\n      var _this3 = this;\n\n      this.formData = {};\n      this.formData.state = 0;\n      this.itemTitle = '添加通知/公告'; //this.addUser = true;\n\n      this.saveItem1 = true;\n\n      if (this.managerNames.length >= 1) {\n        return;\n      }\n\n      ;\n      getStudentName().then(function (res) {\n        if (res.data.success) {\n          //this.managerNames = res.data.result.managerNames;\n          var managerNamesArr = res.data.result.managerNames;\n\n          for (var i in managerNamesArr) {\n            var objCourses = {};\n            objCourses.key = managerNamesArr[i].id;\n            objCourses.label = managerNamesArr[i].name;\n\n            _this3.managerNames.push(objCourses);\n          }\n\n          ;\n        }\n      });\n    },\n    closeSaveItem: function closeSaveItem() {\n      this.formData = {};\n      this.saveItem = false;\n      this.saveItem1 = false;\n      this.targetKeys = [];\n    },\n    saveItemOk: function saveItemOk() {\n      var _this4 = this;\n\n      var that = this;\n      var formData = this.formData;\n      console.log(\"qqqqqqqqqqqq\" + JSON.stringify(formData));\n\n      if (!formData.notice) {\n        this.$Message.warning({\n          content: '请填写公告内容！'\n        });\n        return;\n      } // return;\n\n\n      addNotice(this.formData, this.targetKeys).then(function (res) {\n        // console.log(JSON.stringify(res))\n        if (res.data.result && res.data.result.error) {\n          _this4.$Message.warning({\n            content: res.data.result.error\n          });\n\n          return;\n        } else if (res.data.success) {\n          _this4.$Message.success({\n            content: '公告保存成功'\n          });\n\n          that.saveItem = false;\n          that.saveItem1 = false;\n          that.pageInit();\n        } else if (res.data.errorMsg) {\n          _this4.$Message.warning({\n            content: res.data.errorMsg\n          });\n        }\n\n        that.saveItemStatu = false;\n      });\n    },\n    // 选中项\n    selectOption: function selectOption(selection, row) {\n      this.selectItemArr = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = selection[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          this.selectItemArr.push(item.id);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    // 删除\n    myDelete: function myDelete() {\n      var _this5 = this;\n\n      var selectItemArr = this.selectItemArr;\n\n      if (selectItemArr.length < 1) {\n        this.$Message.warning({\n          content: '请选择项目！'\n        });\n        return;\n      }\n\n      commentDel('/notice/delNotice', selectItemArr).then(function (res) {\n        if (res.data.success) {\n          _this5.selectItemArr = [];\n\n          _this5.pageInit();\n\n          _this5.$Message.success({\n            content: '删除成功！'\n          });\n        } else if (res.data.errorMsg) {\n          _this5.$Message.warning({\n            content: res.data.errorMsg\n          });\n        } // this.tableData = res.data.result.data.pageList;\n\n      });\n    },\n    handleChange: function handleChange(newTargetKeys) {\n      this.targetKeys = newTargetKeys;\n    },\n    render: function render(item) {\n      return item.label;\n    },\n    reloadMockData: function reloadMockData() {\n      this.transfer = this.getMockData();\n      this.targetKeys = this.getTargetKeys();\n    },\n    // 开始日期\n    myStartTime: function myStartTime(newTime) {\n      this.startTime = newTime;\n    },\n    // 结束日期\n    myEndTime: function myEndTime(newTime) {\n      this.endTime = newTime;\n    },\n    // 搜索\n    search: function search() {\n      this.currentPage = 1;\n      this.pageInit();\n    }\n  },\n  mounted: function mounted() {\n    var _this6 = this;\n\n    // 初始化\n    NoticeTableData(10, 1, null, null, null, null).then(function (res) {\n      if (res.data.success) {\n        console.log(\"+++++\" + JSON.stringify(res));\n        _this6.total = res.data.result.pageBounds.totalSize;\n        _this6.tableData = res.data.result.pageBounds.pageList;\n      } else if (res.data.errorMsg) {\n        _this6.$Message.warning({\n          content: res.data.errorMsg\n        });\n      }\n    });\n  },\n  computed: {\n    access: function access() {\n      return this.$store.state.user.access;\n    },\n    mainTeacher: function mainTeacher() {\n      return this.$store.state.user.teacherId;\n    },\n    //所有权限\n    superAdmin: function superAdmin() {\n      return hasOneOf(['superAdmin'], this.access);\n    },\n    //部分权限\n    viewTeacher: function viewTeacher() {\n      return hasOneOf(['teacher'], this.access);\n    }\n  }\n};",{"version":3,"sources":["notice.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <Card class=\"mb-10\">\r\n      <Row>\r\n        <Col span=\"12\">\r\n          <h3>公告通知列表</h3>\r\n        </Col>\r\n        <Col span=\"12\" class=\"text-right\">\r\n          <component2 v-if=\"superAdmin\">\r\n            <Button type=\"primary\" @click='addItem'class=\"mr-10\">新建</Button>\r\n          </component2>\r\n          <component2 v-if=\"viewTeacher,mainTeacher!==null\" >\r\n            <Button type=\"primary\" @click='addItem1'class=\"mr-10\">新建</Button>\r\n          </component2>\r\n          <component2 v-if=\"superAdmin\">\r\n            <Button type=\"error\" @click=\"myDelete\">删除</Button>\r\n          </component2>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n    <Card>\r\n    <Row style=\"margin-bottom: 10px;\">\r\n      <span>日期范围：</span>\r\n          <DatePicker style=\"width:160px\" type=\"date\" format=\"yyyy-MM-dd\" :value='startTime' @on-change='myStartTime' placeholder=\"开始日期\"></DatePicker>\r\n          <span>~</span>\r\n          <DatePicker style=\"width:160px;margin-right:20px;\" type=\"date\" format=\"yyyy-MM-dd\" :value='endTime' @on-change='myEndTime' placeholder=\"结束日期\"></DatePicker>\r\n      <span>关键字：</span>\r\n      <Input placeholder=\"请输入通知人查询\" v-model.trim='searchText' style=\"width:200px;margin-right:20px;\"></Input>\r\n      <Button type=\"primary\" @click='search'>搜索</Button>\r\n    </Row>\r\n        <Table size=\"large\" @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"tableCol\" :data=\"tableData\"></Table>\r\n        <Page class='mt-10 text-right' :total=\"total\" :current='currentPage' :page-size='pageSize' @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-sizer show-total />\r\n    </Card>\r\n      <Modal\r\n      v-model=\"saveItem\"\r\n      :title=\"itemTitle\"\r\n      @on-cancel='closeSaveItem'>\r\n      <Form ref=\"formData\" :model=\"formData\" :label-width=\"120\">\r\n        <input type=\"hidden\" name='id' v-model=\"formData.id\">\r\n        <FormItem label=\"通知/公告内容\">\r\n            <Input v-model=\"formData.notice\" type=\"textarea\" placeholder=\"请填写公告或通知内容\" :maxlength=\"10\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"是否在首页公告显示\">\r\n            <RadioGroup v-model=\"formData.state\">\r\n                <Radio :label=\"0\" :key=\"0\"><span>否</span></Radio>\r\n                <Radio :label=\"1\" :key=\"1\"><span>是</span></Radio>\r\n              </RadioGroup>\r\n       </FormItem>\r\n       <FormItem label=\"请选择通告类型\">\r\n            <RadioGroup v-model=\"formData.rose\" type=\"button\">\r\n              <Radio :label=\"0\" :key=\"0\"><span>公告</span></Radio>\r\n              <Radio :label=\"1\" :key=\"1\"><span>表扬</span></Radio>\r\n              <Radio :label=\"2\" :key=\"2\"><span>批评</span></Radio>\r\n            </RadioGroup>\r\n       </FormItem>\r\n       <FormItem label=\"是否选择通知人\">\r\n            <RadioGroup v-model=\"buttonState\" type=\"button\">\r\n                <Radio :label=\"0\" :key=\"0\"><span>否</span></Radio>\r\n                <Radio :label=\"1\" :key=\"1\"><span>是</span></Radio>\r\n              </RadioGroup>\r\n       </FormItem>\r\n        <FormItem label=\"请选择被通知人\" v-if=\"buttonState==1\">\r\n          <Transfer \r\n                :data=\"managerNames\"\r\n                :targetKeys=\"targetKeys\"\r\n                :list-style=\"listStyle\"\r\n                :render-format=\"render\"\r\n                :operations=\"['移除','添加']\"\r\n                filterable\r\n                @on-change=\"handleChange\"\r\n                >\r\n            </Transfer>\r\n       </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeSaveItem\">关闭</Button>\r\n          <Button type=\"primary\" :disabled='saveItemStatu'  @click=\"saveItemOk\">确认</Button>\r\n      </div>\r\n    </Modal>\r\n<!-- ----------------------------------------------------------------------------- -->\r\n  <Modal\r\n      v-model=\"saveItem1\"\r\n      :title=\"itemTitle\"\r\n      @on-cancel='closeSaveItem'>\r\n      <Form ref=\"formData\" :model=\"formData\" :label-width=\"120\">\r\n        <input type=\"hidden\" name='id' v-model=\"formData.id\">\r\n        <FormItem label=\"通知/公告内容\">\r\n            <Input v-model=\"formData.notice\" type=\"textarea\" placeholder=\"请填写公告或通知内容\" :maxlength=\"10\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"请选择通告类型\">\r\n            <RadioGroup v-model=\"formData.rose\" type=\"button\">\r\n              <Radio :label=\"0\" :key=\"0\"><span>公告</span></Radio>\r\n              <Radio :label=\"1\" :key=\"1\"><span>表扬</span></Radio>\r\n              <Radio :label=\"2\" :key=\"2\"><span>批评</span></Radio>\r\n            </RadioGroup>\r\n       </FormItem>\r\n       <FormItem label=\"是否选择通知人\">\r\n            <RadioGroup v-model=\"buttonState\" type=\"button\">\r\n                <Radio :label=\"0\" :key=\"0\"><span>否</span></Radio>\r\n                <Radio :label=\"1\" :key=\"1\"><span>是</span></Radio>\r\n              </RadioGroup>\r\n       </FormItem>\r\n        <FormItem label=\"请选择被通知人\" v-if=\"buttonState==1\">\r\n          <Transfer \r\n                :data=\"managerNames\"\r\n                :targetKeys=\"targetKeys\"\r\n                :list-style=\"listStyle\"\r\n                :render-format=\"render\"\r\n                :operations=\"['移除','添加']\"\r\n                filterable\r\n                @on-change=\"handleChange\"\r\n                >\r\n            </Transfer>\r\n       </FormItem>\r\n       <FormItem label=\"申请在首页显示通告\">\r\n            <RadioGroup v-model=\"formData.state\">\r\n                <Radio :label=\"0\" :key=\"0\"><span>否</span></Radio>\r\n                <Radio :label=\"2\" :key=\"2\"><span>是</span></Radio>\r\n              </RadioGroup>\r\n       </FormItem>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeSaveItem\">关闭</Button>\r\n          <Button type=\"primary\" :disabled='saveItemStatu'  @click=\"saveItemOk\">确认</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { hasOneOf,oneOf } from '@/libs/tools'\r\nimport { NoticeTableData, commentDel,getManagerName,addNotice,getStudentName} from '@/api/data'\r\nexport default {\r\n  data () {\r\n    return {\r\n      startTime: '', // 入住日期初始化\r\n      endTime: '',  // 退房日期初始化\r\n      searchText: '', // 搜索内容初始化\r\n      pageSize:10,\r\n      currentPage:1,\r\n      total:1,\r\n\r\n      loading1: false,\r\n      options1:[],\r\n      managerNames:[],\r\n      targetKeys: [],\r\n      listStyle: {\r\n          width: '130px',\r\n          height: '200px'\r\n      },\r\n\r\n      courseList: [],  \r\n      buttonState:0,\r\n\r\n      formData:{\r\n        state:0\r\n      },      //表单信息\r\n      addUser:true,   //是否为新增\r\n\r\n      selectItemArr: [],    // 选中项目id\r\n\r\n      //mainTeacher:0,\r\n\r\n      saveItem:false,     //保存操作框\r\n      saveItemStatu:false,     //保存点击状态\r\n      itemTitle:'创建通告/公告', \r\n      tableCol: [\r\n        {\r\n          type: 'selection',\r\n          width: 60,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '内容',\r\n          key: 'notice'\r\n        },\r\n        {\r\n           title: '创建时间',\r\n           key: 'createTimeStr'\r\n        },\r\n        {\r\n           title: '通知人',\r\n           key: 'name',\r\n           render: (h, params) => {\r\n           // console.log(\"++++++\"+JSON.stringify(params.row.name))\r\n            var oName = params.row.name;\r\n            if (oName === null) {\r\n               oName = \"此通告没有通知人\";\r\n            }\r\n            return h('div', [\r\n              h('span', {}, oName)\r\n            ])\r\n          }\r\n        },\r\n        {\r\n           title: '通知类型',\r\n           key: 'roseStr'\r\n        },\r\n      ],\r\n      tableData: []\r\n    }\r\n  },\r\n  methods: {\r\n    async pageInit(){\r\n      NoticeTableData(this.pageSize,this.currentPage,this.startTime,this.endTime,this.searchText,null).then(res => {\r\n        if(res.data.success){\r\n          this.total = res.data.result.pageBounds.totalSize;\r\n          this.tableData = res.data.result.pageBounds.pageList;\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    changePage(page){\r\n      this.currentPage = page;\r\n      this.pageInit();\r\n    },\r\n    changeSize(size){\r\n      this.pageSize = size;\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    addItem(){\r\n      this.formData = {};\r\n      this.formData.state=0;\r\n      this.itemTitle = '添加通知/公告';\r\n      //this.addUser = true;\r\n      this.saveItem = true;\r\n      if(this.managerNames.length>=1){\r\n        return;\r\n      };\r\n      getManagerName(null).then(res => {\r\n        if(res.data.success){\r\n          //this.managerNames = res.data.result.managerNames;\r\n          var managerNamesArr = res.data.result.managerNames;\r\n          for(var i in managerNamesArr){\r\n          var objCourses = {};\r\n          objCourses.key = managerNamesArr[i].id;\r\n          objCourses.label = managerNamesArr[i].name;\r\n          this.managerNames.push(objCourses)\r\n         };\r\n        }\r\n      })\r\n    },\r\n\r\n    addItem1(){\r\n      this.formData = {};\r\n      this.formData.state=0;\r\n      this.itemTitle = '添加通知/公告';\r\n      //this.addUser = true;\r\n      this.saveItem1 = true;\r\n      if(this.managerNames.length>=1){\r\n        return;\r\n      };\r\n\r\n      getStudentName().then(res => {\r\n        if(res.data.success){\r\n          //this.managerNames = res.data.result.managerNames;\r\n          var managerNamesArr = res.data.result.managerNames;\r\n          for(var i in managerNamesArr){\r\n          var objCourses = {};\r\n          objCourses.key = managerNamesArr[i].id;\r\n          objCourses.label = managerNamesArr[i].name;\r\n          this.managerNames.push(objCourses)\r\n         };\r\n        }\r\n      })\r\n     },\r\n\r\n    closeSaveItem(){\r\n      this.formData = {};\r\n      this.saveItem = false;\r\n      this.saveItem1 = false;\r\n      this.targetKeys=[];\r\n    },\r\n\r\n    saveItemOk(){\r\n      var that = this;\r\n      var formData = this.formData;\r\n      console.log(\"qqqqqqqqqqqq\"+JSON.stringify(formData))\r\n      if(!formData.notice){\r\n        this.$Message.warning({\r\n          content:'请填写公告内容！'\r\n        });\r\n        return;\r\n      }\r\n     // return;\r\n      addNotice(this.formData,this.targetKeys).then(res => {\r\n          \r\n          // console.log(JSON.stringify(res))\r\n          if(res.data.result && res.data.result.error){\r\n            this.$Message.warning({\r\n              content:res.data.result.error\r\n            })\r\n            return;\r\n          }else if(res.data.success){\r\n            this.$Message.success({\r\n              content:'公告保存成功'\r\n            });\r\n            that.saveItem = false;\r\n            that.saveItem1 = false;\r\n            that.pageInit();\r\n          }else if(res.data.errorMsg){\r\n            this.$Message.warning({\r\n              content:res.data.errorMsg\r\n            })\r\n          }\r\n          that.saveItemStatu = false;\r\n        })\r\n      },\r\n    // 选中项\r\n    selectOption (selection, row) {\r\n      this.selectItemArr = []\r\n      for (let item of selection) {\r\n        this.selectItemArr.push(item.id)\r\n      }\r\n    },\r\n    // 删除\r\n    myDelete () {\r\n      var selectItemArr = this.selectItemArr\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      commentDel('/notice/delNotice', selectItemArr).then(res => {\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'删除成功！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })\r\n    },\r\n    handleChange(newTargetKeys) {\r\n        this.targetKeys = newTargetKeys;\r\n    },\r\n    render (item) {\r\n        return item.label;\r\n    },\r\n     reloadMockData () {\r\n        this.transfer = this.getMockData();\r\n        this.targetKeys = this.getTargetKeys();\r\n    },\r\n    // 开始日期\r\n    myStartTime (newTime) {\r\n      this.startTime = newTime\r\n    },\r\n    // 结束日期\r\n    myEndTime (newTime) {\r\n      this.endTime = newTime\r\n    },\r\n    // 搜索\r\n    search () {\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    }\r\n  },\r\n  mounted () {\r\n    // 初始化\r\n    NoticeTableData(10, 1,null,null,null,null).then(res => {\r\n      if(res.data.success){\r\n        console.log(\"+++++\"+JSON.stringify(res))\r\n        this.total = res.data.result.pageBounds.totalSize;\r\n        this.tableData = res.data.result.pageBounds.pageList;\r\n      }else if(res.data.errorMsg){\r\n        this.$Message.warning({\r\n          content:res.data.errorMsg\r\n        })\r\n      }\r\n    })\r\n  },\r\n\r\n   computed: {\r\n    access () {\r\n      return this.$store.state.user.access\r\n    },\r\n    mainTeacher () {\r\n      return this.$store.state.user.teacherId\r\n    },\r\n    //所有权限\r\n    superAdmin () {\r\n      return hasOneOf(['superAdmin'], this.access)\r\n    },\r\n  //部分权限\r\n    viewTeacher () {\r\n      return hasOneOf(['teacher'], this.access)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src\\myView\\notice"}]}