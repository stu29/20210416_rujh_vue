{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\news\\news.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\news\\news.vue","mtime":1567648062328},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\.babelrc","mtime":1567648062203},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u8339\\u5BB6\\u8C6A\\\\Desktop\\\\20210416_rujh_vue\\\\20210416_rujh_vue\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { hasOneOf } from '@/libs/tools';\nimport { newsTableData, commentDel } from '@/api/data';\nexport default {\n  data: function data() {\n    return {\n      //searchText: '', // 搜索内容初始化\n      startTime: '',\n      // 入住日期初始化\n      endTime: '',\n      // 退房日期初始化\n      pageSize: 10,\n      currentPage: 1,\n      total: 1,\n      formData: {},\n      //表单信息\n      selectItemArr: [],\n      // 选中项目id\n      tableCol: [{\n        type: 'selection',\n        width: 60,\n        align: 'center'\n      }, {\n        title: '消息内容',\n        key: 'news'\n      }, {\n        title: '发布时间',\n        key: 'createTimeStr'\n      }],\n      tableData: []\n    };\n  },\n  methods: {\n    pageInit: function () {\n      var _pageInit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                newsTableData(this.pageSize, this.currentPage, this.startTime, this.endTime).then(function (res) {\n                  if (res.data.success) {\n                    _this.total = res.data.result.data.totalSize;\n                    _this.tableData = res.data.result.data.pageList;\n                  } else if (res.data.errorMsg) {\n                    _this.$Message.warning({\n                      content: res.data.errorMsg\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function pageInit() {\n        return _pageInit.apply(this, arguments);\n      };\n    }(),\n    changePage: function changePage(page) {\n      this.currentPage = page;\n      this.pageInit();\n    },\n    changeSize: function changeSize(size) {\n      this.pageSize = size;\n      this.currentPage = 1;\n      this.pageInit();\n    },\n    closeRecordModal: function closeRecordModal() {\n      this.recordModal = false;\n      this.tableCurrentPage = 1;\n      this.recordData = [];\n    },\n    closeTextModal: function closeTextModal() {\n      this.textModal = false;\n      this.tableCurrentPage = 1;\n      this.recordData = [];\n    },\n    // 选中项\n    selectOption: function selectOption(selection, row) {\n      this.selectItemArr = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = selection[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          this.selectItemArr.push(item.id);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    // 删除\n    myDelete: function myDelete() {\n      var _this2 = this;\n\n      var selectItemArr = this.selectItemArr;\n      console.log(\"++++++\" + JSON.stringify(selectItemArr));\n\n      if (selectItemArr.length < 1) {\n        this.$Message.warning({\n          content: '请选择项目！'\n        });\n        return;\n      }\n\n      commentDel('/news/delNews', selectItemArr).then(function (res) {\n        //console.log(JSON.stringify(res))\n        if (res.data.success) {\n          _this2.selectItemArr = [];\n\n          _this2.pageInit();\n\n          _this2.$Message.success({\n            content: '删除成功！'\n          });\n        } else if (res.data.errorMsg) {\n          _this2.$Message.warning({\n            content: res.data.errorMsg\n          });\n        } // this.tableData = res.data.result.data.pageList;\n\n      });\n    },\n    // 入住日期\n    myStartTime: function myStartTime(newTime) {\n      this.startTime = newTime;\n    },\n    // 退房日期\n    myEndTime: function myEndTime(newTime) {\n      this.endTime = newTime;\n    },\n    // 搜索\n    search: function search() {\n      this.currentPage = 1;\n      this.pageInit();\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    // 初始化\n    newsTableData(10, 1).then(function (res) {\n      console.log(\"----\" + JSON.stringify(res));\n\n      if (res.data.success) {\n        _this3.total = res.data.result.data.totalSize;\n        _this3.tableData = res.data.result.data.pageList;\n      } else if (res.data.errorMsg) {\n        _this3.$Message.warning({\n          content: res.data.errorMsg\n        });\n      }\n    });\n  },\n  computed: {\n    access: function access() {\n      return this.$store.state.user.access;\n    },\n    //所有权限\n    viewAccessAll: function viewAccessAll() {\n      return hasOneOf(['superAdmin', 'teacher', 'student'], this.access);\n    },\n    //部分权限\n    viewAccessTeacher: function viewAccessTeacher() {\n      return hasOneOf(['superAdmin', 'teacher'], this.access);\n    },\n    //部分权限\n    viewTeacher: function viewTeacher() {\n      return hasOneOf(['superAdmin', 'student'], this.access);\n    },\n    //部分权限\n    viewAdmin: function viewAdmin() {\n      return hasOneOf(['superAdmin'], this.access);\n    },\n    //部分权限\n    viewStudent: function viewStudent() {\n      return hasOneOf(['student'], this.access);\n    }\n  }\n};",{"version":3,"sources":["news.vue"],"names":[],"mappings":"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","sourcesContent":["<style>\r\n    .demo-upload-list{\r\n        display: inline-block;\r\n        width: 60px;\r\n        height: 60px;\r\n        text-align: center;\r\n        line-height: 60px;\r\n        border: 1px solid transparent;\r\n        border-radius: 4px;\r\n        overflow: hidden;\r\n        background: #fff;\r\n        position: relative;\r\n        box-shadow: 0 1px 1px rgba(0,0,0,.2);\r\n        margin-right: 4px;\r\n    }\r\n    .demo-upload-list img{\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    .demo-upload-list-cover{\r\n        display: none;\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: rgba(0,0,0,.6);\r\n    }\r\n    .demo-upload-list:hover .demo-upload-list-cover{\r\n        display: block;\r\n    }\r\n    .demo-upload-list-cover i{\r\n        color: #fff;\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n        margin: 0 2px;\r\n    }\r\n</style>\r\n<template>\r\n  <div>\r\n    <Card class=\"mb-10\">\r\n      <Row>\r\n        <Col span=\"12\">\r\n          <h3>消息中心</h3>\r\n        </Col>\r\n        <Col span=\"12\" class=\"text-right\">\r\n            <Button type=\"error\" @click=\"myDelete\">删除</Button>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n    \r\n    <Card>\r\n    <Row style=\"margin-bottom: 10px;\">\r\n          <span>日期范围：</span>\r\n          <DatePicker style=\"width:160px\" type=\"date\" format=\"yyyy-MM-dd\" :value='startTime' @on-change='myStartTime' placeholder=\"开始日期\"></DatePicker>\r\n          <span>~</span>\r\n          <DatePicker style=\"width:160px;margin-right:20px;\" type=\"date\" format=\"yyyy-MM-dd\" :value='endTime' @on-change='myEndTime' placeholder=\"结束日期\"></DatePicker>\r\n          <Button type=\"primary\" @click='search'>搜索</Button>\r\n    </Row>\r\n        <Table size=\"large\"   @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"tableCol\" :data=\"tableData\">\r\n        </Table>\r\n        <Page class='mt-10 text-right' :total=\"total\" :current='currentPage' :page-size='pageSize' @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-sizer show-total/>\r\n    </Card>\r\n    \r\n  </div>\r\n</template>\r\n<script>\r\nimport { hasOneOf } from '@/libs/tools'\r\nimport { newsTableData,commentDel} from '@/api/data'\r\nexport default {\r\n  data () {\r\n    return {\r\n      //searchText: '', // 搜索内容初始化\r\n      startTime: '', // 入住日期初始化\r\n      endTime: '',  // 退房日期初始化\r\n      pageSize:10,\r\n      currentPage:1,\r\n      total:1,\r\n\r\n      formData:{},      //表单信息\r\n\r\n      selectItemArr: [],    // 选中项目id\r\n      tableCol: [\r\n        {\r\n          type: 'selection',\r\n          width: 60,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '消息内容',\r\n          key: 'news'\r\n        },\r\n        {\r\n          title: '发布时间',\r\n          key: 'createTimeStr'\r\n        }\r\n      ],\r\n      tableData: []\r\n    }\r\n  },\r\n  methods: {\r\n    async pageInit(){\r\n      newsTableData(this.pageSize,this.currentPage,this.startTime,this.endTime).then(res => {\r\n        if(res.data.success){\r\n          this.total = res.data.result.data.totalSize;\r\n          this.tableData = res.data.result.data.pageList;\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    changePage(page){\r\n      this.currentPage = page;\r\n      this.pageInit();\r\n    },\r\n    changeSize(size){\r\n      this.pageSize = size;\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    closeRecordModal(){\r\n      this.recordModal = false;\r\n      this.tableCurrentPage = 1;\r\n      this.recordData = [];\r\n    },\r\n    closeTextModal(){\r\n      this.textModal = false;\r\n      this.tableCurrentPage = 1;\r\n      this.recordData = [];\r\n    },\r\n\r\n    // 选中项\r\n    selectOption (selection, row) {\r\n      this.selectItemArr = []\r\n      for (let item of selection) {\r\n        this.selectItemArr.push(item.id)\r\n      }\r\n    },\r\n    // 删除\r\n    myDelete () {\r\n      var selectItemArr = this.selectItemArr\r\n      console.log(\"++++++\"+JSON.stringify(selectItemArr))\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      commentDel('/news/delNews', selectItemArr).then(res => {\r\n        //console.log(JSON.stringify(res))\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'删除成功！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })\r\n    },\r\n    // 入住日期\r\n    myStartTime (newTime) {\r\n      this.startTime = newTime\r\n    },\r\n    // 退房日期\r\n    myEndTime (newTime) {\r\n      this.endTime = newTime\r\n    },\r\n    // 搜索\r\n    search () {\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    }\r\n  },\r\n  mounted () {\r\n    // 初始化\r\n    newsTableData(10, 1).then(res => {\r\n       console.log(\"----\"+JSON.stringify(res));\r\n      if(res.data.success){\r\n        this.total = res.data.result.data.totalSize;\r\n        this.tableData = res.data.result.data.pageList;\r\n      }else if(res.data.errorMsg){\r\n        this.$Message.warning({\r\n          content:res.data.errorMsg\r\n        })\r\n      }\r\n    })\r\n  },\r\n  computed: {\r\n    access () {\r\n      return this.$store.state.user.access\r\n    },\r\n    //所有权限\r\n    viewAccessAll () {\r\n      return hasOneOf(['superAdmin', 'teacher','student'], this.access)\r\n    },\r\n    //部分权限\r\n    viewAccessTeacher () {\r\n      return hasOneOf(['superAdmin','teacher'], this.access)\r\n    },\r\n  //部分权限\r\n    viewTeacher () {\r\n      return hasOneOf(['superAdmin','student'], this.access)\r\n    },\r\n    //部分权限\r\n    viewAdmin () {\r\n      return hasOneOf(['superAdmin'], this.access)\r\n    },\r\n    //部分权限\r\n    viewStudent () {\r\n      return hasOneOf(['student'], this.access)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src\\myView\\news"}]}