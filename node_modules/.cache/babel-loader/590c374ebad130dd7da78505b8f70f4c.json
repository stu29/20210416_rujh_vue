{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\student\\student.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\student\\student.vue","mtime":1618817111121},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\.babelrc","mtime":1567648062203},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\\\u8339\\u5BB6\\u8C6A\\\\Desktop\\\\20210416_rujh_vue\\\\20210416_rujh_vue\\\\node_modules\\\\@babel\\\\runtime/helpers/builtin/es6/asyncToGenerator\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Editor from 'wangeditor';\nimport 'wangeditor/release/wangEditor.min.css';\nimport { hasOneOf, oneOf } from '@/libs/tools';\nimport { studentTableData, updateStudent, commentDel, addStudent, getAllCourse, customStudent } from '@/api/data';\nexport default {\n  name: 'Editor',\n  props: {\n    value: {\n      type: String,\n      default: ''\n    },\n\n    /**\r\n     * 绑定的值的类型, enum: ['html', 'text']\r\n     */\n    valueType: {\n      type: String,\n      default: 'html',\n      validator: function validator(val) {\n        return oneOf(val, ['html', 'text']);\n      }\n    },\n\n    /**\r\n     * @description 设置change事件触发时间间隔\r\n     */\n    changeInterval: {\n      type: Number,\n      default: 200\n    },\n\n    /**\r\n     * @description 是否开启本地存储\r\n     */\n    cache: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    var _this = this;\n\n    return {\n      startTime: '',\n      // 入住日期初始化\n      endTime: '',\n      // 退房日期初始化\n      searchText: '',\n      // 搜索内容初始化\n      pageSize: 10,\n      currentPage: 1,\n      total: 1,\n      formData: {},\n      //表单信息\n      addUser: true,\n      //是否为新增用户\n      saveItem: false,\n      //保存操作框\n      saveItemStatu: false,\n      //保存点击状态\n      itemTitle: '新建学生',\n      //保存操作框title\n      valueText: 0,\n      customText: 0,\n      saveItem1: false,\n      //保存操作框\n      saveItemStatu1: false,\n      //保存点击状态\n      itemTitle1: '评分',\n      //保存操作框title\n      selectItemArr: [],\n      // 选中项目id\n      tableCol: [{\n        type: 'selection',\n        width: 60,\n        align: 'center'\n      }, {\n        title: '注册时间',\n        key: 'createTimeStr'\n      }, {\n        title: '姓名',\n        key: 'name'\n      }, {\n        title: '手机号',\n        key: 'phone'\n      }, {\n        title: '所在班级',\n        key: 'course',\n        render: function render(h, params) {\n          console.log(\"++++++\" + JSON.stringify(params));\n          var oName = params.row.course;\n          return h('div', [h('span', {}, oName.className + \"(\" + oName.cname + \")\")]);\n        }\n      }, {\n        width: 100,\n        title: '操作',\n        key: 'examineStatus',\n        render: function render(h, params) {\n          return h('div', [h('Button', {\n            props: {\n              type: 'primary',\n              size: 'large',\n              vertical: true,\n              disabled: _this.viewStudent //disabled:this.mainTeacher !== null\n\n            },\n            on: {\n              click: function click() {\n                var getData = JSON.parse(JSON.stringify(_this.tableData[params.index]));\n                _this.formData = getData;\n                _this.itemTitle = '编辑学生信息';\n                _this.addUser = false;\n                _this.saveItem = true;\n\n                if (_this.courseList.length >= 1) {\n                  return;\n                }\n\n                ;\n                getAllCourse().then(function (res) {\n                  if (res.data.success) {\n                    _this.courseList = res.data.result.clasies; // this.classList = res.data.result.courses;\n\n                    console.log(JSON.stringify(res));\n                  } else if (res.data.errorMsg) {\n                    _this.$Message.warning({\n                      content: res.data.errorMsg\n                    });\n                  }\n                });\n              }\n            }\n          }, '编辑'), h('Button', {\n            props: {\n              type: 'success',\n              size: 'large',\n              vertical: true,\n              disabled: _this.viewTeacher\n            },\n            on: {\n              click: function click() {\n                var getData = JSON.parse(JSON.stringify(_this.tableData[params.index]));\n                _this.formData = getData;\n\n                _this.editor.txt.html('');\n\n                _this.itemTitle1 = '评分'; //this.addUser = false;\n\n                _this.saveItem1 = true;\n              }\n            }\n          }, '评分')]);\n        } //customStudent}\n\n      }],\n      tableData: [],\n      courseList: [],\n      listStyle: {\n        width: '150px',\n        height: '200px'\n      }\n    };\n  },\n  methods: {\n    pageInit: function () {\n      var _pageInit = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                studentTableData(this.pageSize, this.currentPage, this.startTime, this.endTime, this.searchText).then(function (res) {\n                  if (res.data.success) {\n                    _this2.total = res.data.result.data.totalSize;\n                    _this2.tableData = res.data.result.data.pageList;\n                  } else if (res.data.errorMsg) {\n                    _this2.$Message.warning({\n                      content: res.data.errorMsg\n                    });\n                  }\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      return function pageInit() {\n        return _pageInit.apply(this, arguments);\n      };\n    }(),\n    setHtml: function setHtml(val) {\n      this.editor.txt.html(\"\");\n    },\n    changePage: function changePage(page) {\n      this.currentPage = page;\n      this.pageInit();\n    },\n    changeSize: function changeSize(size) {\n      this.pageSize = size;\n      this.currentPage = 1;\n      this.pageInit();\n    },\n    addItem: function addItem() {\n      var _this3 = this;\n\n      this.formData = {};\n      this.itemTitle = '添加学生';\n      this.addUser = true;\n      this.saveItem = true;\n\n      if (this.courseList.length >= 1) {\n        return;\n      }\n\n      ;\n      getAllCourse().then(function (res) {\n        if (res.data.success) {\n          _this3.courseList = res.data.result.clasies; //this.classList = res.data.result.courses;\n\n          console.log(JSON.stringify(\"+++\" + _this3.courseList));\n        } else {\n          _this3.$Message.warning({\n            content: res.data.errorMsg\n          });\n        }\n      });\n    },\n\n    /*closeUpload(){\r\n      this.upLoadPic = false;\r\n      this.defaultList=[];\r\n      this.uploadList=[];\r\n    },*/\n    // 关闭保存项目模态框\n    closeSaveItem: function closeSaveItem() {\n      this.formData = {};\n      this.saveItem = false;\n      this.saveItem1 = false;\n    },\n    saveItemOk: function saveItemOk() {\n      var _this4 = this;\n\n      var that = this;\n      var formData = this.formData; //console.log(JSON.stringify(formData))\n\n      if (!formData.name) {\n        this.$Message.warning({\n          content: '请填写您的姓名！'\n        });\n        return;\n      } else if (!/[\\u4e00-\\u9fa5_a-zA-Z]+$/.test(formData.name)) {\n        this.$Message.warning({\n          content: '请填写正确的姓名'\n        });\n        return;\n      }\n\n      ;\n\n      if (!formData.phone) {\n        this.$Message.warning({\n          content: '请填写您的手机号'\n        });\n        return;\n      } else if (!/^1(3|4|5|6|7|8)\\d{9}$/.test(formData.phone)) {\n        this.$Message.warning({\n          content: '请填写正确的手机号'\n        });\n        return;\n      }\n\n      ;\n\n      if (this.addUser) {\n        if (!formData.password) {\n          this.$Message.warning({\n            content: '请填写您的密码！'\n          });\n          return;\n        } else if (!/^[\\w_-]{5,11}$/.test(formData.password)) {\n          this.$Message.warning({\n            content: '请填写5-11密码'\n          });\n          return;\n        }\n\n        ;\n\n        if (!formData.confirmPwd) {\n          this.$Message.warning({\n            content: '请确认您的密码！'\n          });\n          return;\n        } else if (formData.confirmPwd !== formData.password) {\n          this.$Message.warning({\n            content: '两次密码请保持一致'\n          });\n          return;\n        }\n\n        ;\n\n        if (!formData.courseId) {\n          this.$Message.warning({\n            content: '请选择班级'\n          });\n          return;\n        }\n\n        ;\n        addStudent(this.formData).then(function (res) {\n          if (res.data.result && res.data.result.error) {\n            _this4.$Message.warning({\n              content: res.data.result.error\n            });\n\n            return;\n          } else if (res.data.success) {\n            _this4.$Message.success({\n              content: '保存用户成功'\n            });\n\n            that.saveItem = false;\n            that.pageInit();\n          } else if (res.data.errorMsg) {\n            _this4.$Message.warning({\n              content: res.data.errorMsg\n            });\n          }\n\n          that.saveItemStatu = false;\n        });\n      } else {\n        this.saveItemStatu = true;\n        updateStudent(this.formData).then(function (res) {\n          // var that = this;\n          that.saveItemStatu = false;\n\n          if (res.data.success) {\n            _this4.$Message.success({\n              content: '修改用户成功'\n            });\n\n            that.saveItem = false;\n            that.pageInit();\n          } else if (res.data.errorMsg) {\n            _this4.$Message.warning({\n              content: res.data.errorMsg\n            });\n          }\n        });\n      }\n    },\n    saveItemOk1: function saveItemOk1() {\n      var _this5 = this;\n\n      var that = this;\n      var formData = this.formData;\n      var customText = this.editor.txt.text();\n      console.log(\"666666\" + JSON.stringify(customText));\n\n      if (!formData.customNum) {\n        this.$Message.warning({\n          content: '请给学生打分！'\n        });\n        return;\n      }\n\n      ;\n\n      if (customText.length > 30) {\n        this.$Message.warning({\n          content: '输入的内容不能超过10字'\n        });\n        return;\n      } else if (customText.length < 5) {\n        this.$Message.warning({\n          content: '输入的内容不能少于5个字'\n        });\n        return;\n      }\n\n      ;\n      customStudent(this.formData, customText).then(function (res) {\n        if (res.data.result && res.data.result.error) {\n          _this5.$Message.warning({\n            content: res.data.result.error\n          });\n\n          return;\n        } else if (res.data.success) {\n          _this5.$Message.success({\n            content: '评分成功'\n          });\n\n          that.saveItem1 = false;\n          that.pageInit();\n        } else if (res.data.errorMsg) {\n          _this5.$Message.warning({\n            content: res.data.errorMsg\n          });\n        }\n\n        that.saveItemStatu1 = false;\n      });\n    },\n    // 选中项\n    selectOption: function selectOption(selection, row) {\n      this.selectItemArr = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = selection[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n          this.selectItemArr.push(item.id);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    // 删除\n    myDelete: function myDelete() {\n      var _this6 = this;\n\n      var selectItemArr = this.selectItemArr;\n\n      if (selectItemArr.length < 1) {\n        this.$Message.warning({\n          content: '请选择项目！'\n        });\n        return;\n      }\n\n      commentDel('/student/delStudentById', selectItemArr).then(function (res) {\n        console.log(JSON.stringify(res));\n\n        if (res.data.success) {\n          _this6.selectItemArr = [];\n\n          _this6.pageInit();\n\n          _this6.$Message.success({\n            content: '删除成功！'\n          });\n        } else if (res.data.errorMsg) {\n          _this6.$Message.warning({\n            content: res.data.errorMsg\n          });\n        } // this.tableData = res.data.result.data.pageList;\n\n      });\n    },\n    // 入住日期\n    myStartTime: function myStartTime(newTime) {\n      this.startTime = newTime;\n    },\n    // 退房日期\n    myEndTime: function myEndTime(newTime) {\n      this.endTime = newTime;\n    },\n    // 搜索\n    search: function search() {\n      this.currentPage = 1;\n      this.pageInit();\n    }\n  },\n  mounted: function mounted() {\n    var _this7 = this;\n\n    // 初始化\n    studentTableData(10, 1).then(function (res) {\n      //console.log(\"----\"+JSON.stringify(res));\n      if (res.data.success) {\n        _this7.total = res.data.result.data.totalSize;\n        _this7.tableData = res.data.result.data.pageList;\n      } else if (res.data.errorMsg) {\n        _this7.$Message.warning({\n          content: res.data.errorMsg\n        });\n      }\n    });\n    this.editor = new Editor(\"#\".concat(this.editorId));\n\n    this.editor.customConfig.onchange = function (html) {\n      var text = _this7.editor.txt.text();\n\n      if (_this7.cache) localStorage.editorCache = html;\n\n      _this7.$emit('input', _this7.valueType === 'html' ? html : text);\n\n      _this7.$emit('on-change', html, text);\n\n      _this7.$refs.editor.setHtml('');\n    };\n\n    this.editor.customConfig.menus = [//菜单配置\n    'head', //'list',  // 列表\n    'justify', // 对齐方式\n    'bold', 'fontSize', // 字号\n    'italic', 'underline', //'image',  // 插入图片\n    'foreColor', // 文字颜色\n    'undo', // 撤销\n    'redo'];\n    this.editor.customConfig.onchangeTimeout = this.changeInterval; // create这个方法一定要在所有配置项之后调用\n\n    this.editor.create(); // 如果本地有存储加载本地存储内容\n\n    var html = this.value || localStorage.editorCache;\n    if (html) this.editor.txt.html(html);\n  },\n  computed: {\n    editorId: function editorId() {\n      return \"editor\".concat(this._uid);\n    },\n    access: function access() {\n      return this.$store.state.user.access;\n    },\n    mainTeacher: function mainTeacher() {\n      return this.$store.state.user.teacherId;\n    },\n    //所有权限\n    viewAccessAll: function viewAccessAll() {\n      return hasOneOf(['superAdmin', 'teacher', 'student'], this.access);\n    },\n    //部分权限\n    viewAccessTeacher: function viewAccessTeacher() {\n      return hasOneOf(['teacher'], this.access);\n    },\n    viewTeacher: function viewTeacher() {\n      return hasOneOf(['superAdmin', 'student'], this.access);\n    },\n    //部分权限\n    superAdmin: function superAdmin() {\n      return hasOneOf(['superAdmin'], this.access);\n    },\n    //部分权限\n    viewStudent: function viewStudent() {\n      return hasOneOf(['student', 'teacher'], this.access);\n    }\n  }\n};",{"version":3,"sources":["student.vue"],"names":[],"mappings":"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","sourcesContent":["<style>\r\n    .demo-upload-list{\r\n        display: inline-block;\r\n        width: 60px;\r\n        height: 60px;\r\n        text-align: center;\r\n        line-height: 60px;\r\n        border: 1px solid transparent;\r\n        border-radius: 4px;\r\n        overflow: hidden;\r\n        background: #fff;\r\n        position: relative;\r\n        box-shadow: 0 1px 1px rgba(0,0,0,.2);\r\n        margin-right: 4px;\r\n    }\r\n    .demo-upload-list img{\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    .demo-upload-list-cover{\r\n        display: none;\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: rgba(0,0,0,.6);\r\n    }\r\n    .demo-upload-list:hover .demo-upload-list-cover{\r\n        display: block;\r\n    }\r\n    .demo-upload-list-cover i{\r\n        color: #fff;\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n        margin: 0 2px;\r\n    }\r\n</style>\r\n<template>\r\n  <div>\r\n    <Card class=\"mb-10\">\r\n      <Row>\r\n        <Col span=\"12\">\r\n          <h3>学生管理</h3>\r\n        </Col>\r\n        <Col span=\"12\" class=\"text-right\">\r\n          <component2 v-if=\"superAdmin\">\r\n            <Button type=\"primary\" @click='addItem'class=\"mr-10\">新建</Button>\r\n          </component2>\r\n          <component2 v-if=\"superAdmin\">\r\n            <Button type=\"error\" @click=\"myDelete\">删除</Button>\r\n          </component2>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n    <Card>\r\n    <Row style=\"margin-bottom: 10px;\">\r\n      <!-- <Col span=\"4\">\r\n        <span>审核状态：</span>\r\n        <Select v-model=\"examineStatu\" style=\"width:100px\">\r\n            <Option v-for=\"item in examineSelect\" :value=\"item.examineCode\" :key=\"item.examineCode\">{{ item.examineText }}</Option>\r\n        </Select>\r\n      </Col> -->\r\n          <span>日期范围：</span>\r\n          <DatePicker style=\"width:160px\" type=\"date\" format=\"yyyy-MM-dd\" :value='startTime' @on-change='myStartTime' placeholder=\"开始日期\"></DatePicker>\r\n          <span>~</span>\r\n          <DatePicker style=\"width:160px;margin-right:20px;\" type=\"date\" format=\"yyyy-MM-dd\" :value='endTime' @on-change='myEndTime' placeholder=\"结束日期\"></DatePicker>\r\n          <span>关键字：</span>\r\n          <Input placeholder=\"请输入姓名/手机号\" v-model.trim='searchText' style=\"width:200px;margin-right:20px;\"></Input>\r\n          <Button type=\"primary\" @click='search'>搜索</Button>\r\n    </Row>\r\n        <Table size=\"large\" @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"tableCol\" :data=\"tableData\">\r\n        </Table>\r\n        <Page class='mt-10 text-right' :total=\"total\" :current='currentPage' :page-size='pageSize' @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-sizer show-total/>\r\n    </Card>\r\n    \r\n    <Modal\r\n      v-model=\"saveItem\"\r\n      :title=\"itemTitle\"\r\n      @on-cancel='closeSaveItem'>\r\n      <Form ref=\"formData\" :model=\"formData\" :label-width=\"80\">\r\n        <input type=\"hidden\" name='id' v-model=\"formData.id\">\r\n        <FormItem label=\"姓名\">\r\n            <Input v-model=\"formData.name\" placeholder=\"请填写您的姓名\" :maxlength=\"10\"></Input>\r\n        </FormItem>\r\n         <span style=\"color: red;margin-left: 80px;font-size:5px\">*手机号为您的登录账号*</span>\r\n        <FormItem label=\"手机号\">\r\n            <Input v-model=\"formData.phone\" placeholder=\"请填写您的手机号码\" :maxlength=\"11\"></Input>\r\n        </FormItem>\r\n         <FormItem label=\"密码\" v-if='addUser'>\r\n            <Input type='password' v-model=\"formData.password\" placeholder=\"请填写您的密码\" :maxlength=\"11\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"确认密码\" v-if='addUser'>\r\n           <Input type='password' v-model=\"formData.confirmPwd\" placeholder=\"请确认密码\" :maxlength=\"11\"></Input>\r\n       </FormItem>\r\n        <component2 v-if=\"superAdmin\">\r\n          <FormItem label=\"所在班级\" >\r\n             <Row>\r\n                <Col span=\"12\" style=\"padding-right:10px\">\r\n                    <Select v-model=\"formData.courseId\" filterable>\r\n                        <Option v-for=\"item in courseList\" :value=\"item.id\" :key=\"item.id\">{{ item.className }}({{item.cname}})</Option>\r\n                    </Select>\r\n                </Col>\r\n            </Row>\r\n          </FormItem>\r\n        </component2>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeSaveItem\">关闭</Button>\r\n          <Button type=\"primary\" :disabled='saveItemStatu'  @click=\"saveItemOk\">确认</Button>\r\n      </div>\r\n    </Modal>\r\n\r\n     <Modal\r\n      v-model=\"saveItem1\"\r\n      :title=\"itemTitle1\"\r\n      width=\"60px\"\r\n      @on-cancel='closeSaveItem'>\r\n      <Form ref=\"formData\" :model=\"formData\" :label-width=\"80\">\r\n        <input type=\"hidden\" name='id' v-model=\"formData.id\">\r\n        <component2 v-if=\"viewAccessTeacher\">\r\n          <FormItem label=\"评价内容\" > \r\n            <div class=\"editor-wrapper\" >\r\n                <div :id=\"editorId\" ></div>\r\n            </div>\r\n          </FormItem>\r\n          <FormItem label=\"评分\" >\r\n            <div>\r\n               <Row>\r\n                  <Col span=\"12\">\r\n                      <Rate show-text allow-half v-model=\"formData.customNum\">\r\n                          <span style=\"color: #f5a623\">{{ formData.customNum }}</span>\r\n                      </Rate>\r\n                  </Col>\r\n              </Row> \r\n            </div>\r\n         </FormItem>\r\n        </component2>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeSaveItem\">关闭</Button>\r\n          <Button type=\"primary\" :disabled='saveItemStatu1'  @click=\"saveItemOk1\">确认</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport Editor from 'wangeditor'\r\nimport 'wangeditor/release/wangEditor.min.css'\r\nimport { hasOneOf,oneOf } from '@/libs/tools'\r\nimport { studentTableData,updateStudent, commentDel,addStudent,getAllCourse,customStudent} from '@/api/data'\r\nexport default {\r\n  name: 'Editor',\r\n\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    /**\r\n     * 绑定的值的类型, enum: ['html', 'text']\r\n     */\r\n    valueType: {\r\n      type: String,\r\n      default: 'html',\r\n      validator: (val) => {\r\n        return oneOf(val, ['html', 'text'])\r\n      }\r\n    },\r\n    /**\r\n     * @description 设置change事件触发时间间隔\r\n     */\r\n    changeInterval: {\r\n      type: Number,\r\n      default: 200\r\n    },\r\n    /**\r\n     * @description 是否开启本地存储\r\n     */\r\n    cache: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      startTime: '', // 入住日期初始化\r\n      endTime: '',  // 退房日期初始化\r\n      searchText: '', // 搜索内容初始化\r\n      pageSize:10,\r\n      currentPage:1,\r\n      total:1,\r\n\r\n\r\n      formData:{},      //表单信息\r\n      addUser:true,   //是否为新增用户\r\n\r\n      saveItem:false,     //保存操作框\r\n      saveItemStatu:false,     //保存点击状态\r\n      itemTitle:'新建学生',   //保存操作框title\r\n\r\n      valueText: 0,\r\n      customText: 0,\r\n\r\n      saveItem1:false,     //保存操作框\r\n      saveItemStatu1:false,     //保存点击状态\r\n      itemTitle1:'评分',   //保存操作框title\r\n\r\n      selectItemArr: [],    // 选中项目id\r\n      tableCol: [\r\n        {\r\n          type: 'selection',\r\n          width: 60,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '注册时间',\r\n          key: 'createTimeStr'\r\n        },\r\n        {\r\n          title: '姓名',\r\n          key: 'name'\r\n        },\r\n        {\r\n          title: '手机号',\r\n          key: 'phone'\r\n        },\r\n        {\r\n          title: '所在班级',\r\n          key: 'course',\r\n          render: (h, params) => {\r\n            console.log(\"++++++\"+JSON.stringify(params))\r\n            var oName = params.row.course;\r\n            return h('div', [\r\n              h('span', {}, oName.className+\"(\"+oName.cname+\")\")\r\n            ])\r\n          }\r\n        },\r\n        {\r\n          width:100,\r\n          title: '操作',\r\n          key: 'examineStatus',\r\n          render: (h, params) => {\r\n              return h('div', [\r\n               h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'large',\r\n                  vertical:true,\r\n                  disabled:this.viewStudent\r\n                  //disabled:this.mainTeacher !== null\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    let getData = JSON.parse(JSON.stringify(this.tableData[params.index]));\r\n                    this.formData = getData;\r\n\r\n                    this.itemTitle = '编辑学生信息';\r\n                    \r\n                    this.addUser = false;\r\n                    this.saveItem = true;\r\n                    if(this.courseList.length>=1){\r\n                      return;\r\n                    };\r\n\r\n                     getAllCourse().then(res => {\r\n                      if(res.data.success){\r\n                        this.courseList = res.data.result.clasies; \r\n                       // this.classList = res.data.result.courses;\r\n                       console.log(JSON.stringify(res)) ; \r\n                      }else if(res.data.errorMsg){\r\n                        this.$Message.warning({\r\n                          content:res.data.errorMsg\r\n                        })\r\n                      }\r\n                    })\r\n                    \r\n                  }\r\n                }\r\n              }, '编辑'),\r\n\r\n              h('Button', {\r\n                props: {\r\n                  type: 'success',\r\n                  size: 'large',\r\n                  vertical:true,\r\n                  disabled:this.viewTeacher\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    let getData = JSON.parse(JSON.stringify(this.tableData[params.index]));\r\n                    this.formData = getData;\r\n                    this.editor.txt.html('');\r\n                    this.itemTitle1 = '评分';\r\n                    //this.addUser = false;\r\n                    this.saveItem1 = true;\r\n                  }\r\n                }\r\n              }, '评分')\r\n            ])\r\n           }\r\n          //customStudent}\r\n        }\r\n      ],\r\n      tableData: [],\r\n      courseList: [],\r\n      listStyle: {\r\n          width: '150px',\r\n          height: '200px'\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async pageInit(){\r\n      studentTableData(this.pageSize,this.currentPage,this.startTime,this.endTime,this.searchText).then(res => {\r\n        if(res.data.success){\r\n          this.total = res.data.result.data.totalSize;\r\n          this.tableData = res.data.result.data.pageList;\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    setHtml (val) {\r\n      this.editor.txt.html(\"\")\r\n    },\r\n    changePage(page){\r\n      this.currentPage = page;\r\n      this.pageInit();\r\n    },\r\n    changeSize(size){\r\n      this.pageSize = size;\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    addItem(){\r\n      this.formData = {};\r\n      this.itemTitle = '添加学生';\r\n      this.addUser = true;\r\n      this.saveItem = true;\r\n      if(this.courseList.length>=1){\r\n        return;\r\n      };\r\n      getAllCourse().then(res => {\r\n        if(res.data.success){\r\n         this.courseList = res.data.result.clasies; \r\n         //this.classList = res.data.result.courses;\r\n          console.log(JSON.stringify(\"+++\"+ this.courseList))\r\n        }else{\r\n            this.$Message.warning({\r\n              content:res.data.errorMsg\r\n            })\r\n          }\r\n        })\r\n     },\r\n    /*closeUpload(){\r\n      this.upLoadPic = false;\r\n      this.defaultList=[];\r\n      this.uploadList=[];\r\n    },*/\r\n    // 关闭保存项目模态框\r\n    closeSaveItem(){\r\n      this.formData = {};\r\n      this.saveItem = false;\r\n      this.saveItem1 = false;\r\n    },\r\n    saveItemOk(){\r\n      var that = this;\r\n      var formData = this.formData;\r\n      //console.log(JSON.stringify(formData))\r\n      if(!formData.name){\r\n        this.$Message.warning({\r\n          content:'请填写您的姓名！'\r\n        });\r\n        return;\r\n      }else if (!/[\\u4e00-\\u9fa5_a-zA-Z]+$/.test(formData.name)){\r\n        this.$Message.warning({\r\n          content:'请填写正确的姓名'\r\n        });\r\n        return;\r\n      };\r\n      \r\n      if(!formData.phone){\r\n        this.$Message.warning({\r\n          content:'请填写您的手机号'\r\n        });\r\n        return;\r\n      }else if (!/^1(3|4|5|6|7|8)\\d{9}$/.test(formData.phone)){\r\n        this.$Message.warning({\r\n          content:'请填写正确的手机号'\r\n        });\r\n        return;\r\n      };\r\n\r\n      if(this.addUser){\r\n        if(!formData.password){\r\n          this.$Message.warning({\r\n            content:'请填写您的密码！'\r\n          });\r\n          return;\r\n        }else if (!/^[\\w_-]{5,11}$/.test(formData.password)){\r\n          this.$Message.warning({\r\n            content:'请填写5-11密码'\r\n          });\r\n          return;\r\n        };\r\n        if(!formData.confirmPwd){\r\n          this.$Message.warning({\r\n            content:'请确认您的密码！'\r\n          });\r\n          return;\r\n        }else if (formData.confirmPwd !== formData.password){\r\n          this.$Message.warning({\r\n            content:'两次密码请保持一致'\r\n          });\r\n          return;\r\n        };\r\n\r\n        if(!formData.courseId){\r\n          this.$Message.warning({\r\n            content:'请选择班级'\r\n          });\r\n          return;\r\n        };\r\n        \r\n        addStudent(this.formData).then(res => {\r\n          if(res.data.result && res.data.result.error){\r\n            this.$Message.warning({\r\n              content:res.data.result.error\r\n            })\r\n            return;\r\n          }else if(res.data.success){\r\n            this.$Message.success({\r\n              content:'保存用户成功'\r\n            });\r\n            that.saveItem = false;\r\n            that.pageInit();\r\n          }else if(res.data.errorMsg){\r\n            this.$Message.warning({\r\n              content:res.data.errorMsg\r\n            })\r\n          }\r\n          that.saveItemStatu = false;\r\n        })\r\n      }else{\r\n        this.saveItemStatu = true;\r\n        updateStudent(this.formData).then(res => {\r\n          // var that = this;\r\n          that.saveItemStatu = false;\r\n          if(res.data.success){\r\n            this.$Message.success({\r\n              content:'修改用户成功'\r\n            });\r\n            that.saveItem = false;\r\n            that.pageInit();\r\n          }else if(res.data.errorMsg){\r\n            this.$Message.warning({\r\n              content:res.data.errorMsg\r\n            })\r\n          }\r\n        })\r\n      }\r\n    },\r\n\r\n    saveItemOk1(){\r\n      var that = this;\r\n      var formData = this.formData;\r\n      var customText = this.editor.txt.text()\r\n      console.log(\"666666\"+JSON.stringify(customText));\r\n      if(!formData.customNum){\r\n        this.$Message.warning({\r\n          content:'请给学生打分！'\r\n        });\r\n        return;\r\n      };\r\n      if (customText.length > 30 ){\r\n        this.$Message.warning({\r\n          content:'输入的内容不能超过10字'\r\n        });\r\n        return;\r\n      }else if (customText.length < 5) {\r\n        this.$Message.warning({\r\n          content:'输入的内容不能少于5个字'\r\n        });\r\n        return;\r\n      };\r\n        customStudent(this.formData,customText).then(res => {\r\n          if(res.data.result && res.data.result.error){\r\n            this.$Message.warning({\r\n              content:res.data.result.error\r\n            })\r\n            return;\r\n          }else if(res.data.success){\r\n            this.$Message.success({\r\n              content:'评分成功'\r\n            });\r\n            that.saveItem1 = false;\r\n            that.pageInit();\r\n          }else if(res.data.errorMsg){\r\n            this.$Message.warning({\r\n              content:res.data.errorMsg\r\n            })\r\n          }\r\n          that.saveItemStatu1 = false;\r\n        })\r\n      },\r\n    // 选中项\r\n    selectOption (selection, row) {\r\n      this.selectItemArr = []\r\n      for (let item of selection) {\r\n        this.selectItemArr.push(item.id)\r\n      }\r\n    },\r\n    // 删除\r\n    myDelete () {\r\n      var selectItemArr = this.selectItemArr\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      commentDel('/student/delStudentById', selectItemArr).then(res => {\r\n        console.log(JSON.stringify(res))\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'删除成功！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })\r\n    },\r\n    // 入住日期\r\n    myStartTime (newTime) {\r\n      this.startTime = newTime\r\n    },\r\n    // 退房日期\r\n    myEndTime (newTime) {\r\n      this.endTime = newTime\r\n    },\r\n    // 搜索\r\n    search () {\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    }\r\n    \r\n  },\r\n  mounted () {\r\n    // 初始化\r\n    studentTableData(10, 1).then(res => {\r\n       //console.log(\"----\"+JSON.stringify(res));\r\n      if(res.data.success){\r\n        this.total = res.data.result.data.totalSize;\r\n        this.tableData = res.data.result.data.pageList;\r\n      }else if(res.data.errorMsg){\r\n        this.$Message.warning({\r\n          content:res.data.errorMsg\r\n        })\r\n      }\r\n    })\r\n\r\n\r\n\r\n    this.editor = new Editor(`#${this.editorId}`)\r\n    this.editor.customConfig.onchange = (html) => {\r\n      let text = this.editor.txt.text()\r\n      if (this.cache) localStorage.editorCache = html\r\n      this.$emit('input', this.valueType === 'html' ? html : text)\r\n      this.$emit('on-change', html, text)\r\n      this.$refs.editor.setHtml('');\r\n    }\r\n    this.editor.customConfig.menus = [          //菜单配置\r\n        'head',\r\n        //'list',  // 列表\r\n        'justify',  // 对齐方式\r\n        'bold',\r\n        'fontSize',  // 字号\r\n        'italic',\r\n        'underline',\r\n        //'image',  // 插入图片\r\n        'foreColor',  // 文字颜色\r\n        'undo',  // 撤销\r\n        'redo',  // 重复\r\n            ] \r\n    this.editor.customConfig.onchangeTimeout = this.changeInterval\r\n    // create这个方法一定要在所有配置项之后调用\r\n    this.editor.create()\r\n    // 如果本地有存储加载本地存储内容\r\n    let html = this.value || localStorage.editorCache\r\n    if (html) this.editor.txt.html(html)\r\n\r\n  },\r\n  computed: {\r\n    editorId () {\r\n      return `editor${this._uid}`\r\n    },\r\n    access () {\r\n      return this.$store.state.user.access\r\n    },\r\n    mainTeacher () {\r\n      return this.$store.state.user.teacherId\r\n    },\r\n    //所有权限\r\n    viewAccessAll () {\r\n      return hasOneOf(['superAdmin', 'teacher','student'], this.access)\r\n    },\r\n    //部分权限\r\n    viewAccessTeacher(){\r\n      return hasOneOf(['teacher'], this.access)\r\n    },\r\n\r\n    viewTeacher () {\r\n      return hasOneOf(['superAdmin','student'], this.access)\r\n    },\r\n  //部分权限\r\n    superAdmin () {\r\n      return hasOneOf(['superAdmin'], this.access)\r\n    },\r\n    //部分权限\r\n    viewStudent () {\r\n      return hasOneOf(['student','teacher'], this.access)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src\\myView\\student"}]}