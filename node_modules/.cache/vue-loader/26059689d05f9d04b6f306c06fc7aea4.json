{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\course\\course.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\course\\course.vue","mtime":1567648062313},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n.demo-upload-list{\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0,0,0,.2);\n    margin-right: 4px;\n}\n.demo-upload-list img{\n    width: 100%;\n    height: 100%;\n}\n.demo-upload-list-cover{\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0,0,0,.6);\n}\n.demo-upload-list:hover .demo-upload-list-cover{\n    display: block;\n}\n.demo-upload-list-cover i{\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n",{"version":3,"sources":["course.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"course.vue","sourceRoot":"src\\myView\\course","sourcesContent":["<style>\r\n    .demo-upload-list{\r\n        display: inline-block;\r\n        width: 60px;\r\n        height: 60px;\r\n        text-align: center;\r\n        line-height: 60px;\r\n        border: 1px solid transparent;\r\n        border-radius: 4px;\r\n        overflow: hidden;\r\n        background: #fff;\r\n        position: relative;\r\n        box-shadow: 0 1px 1px rgba(0,0,0,.2);\r\n        margin-right: 4px;\r\n    }\r\n    .demo-upload-list img{\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    .demo-upload-list-cover{\r\n        display: none;\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: rgba(0,0,0,.6);\r\n    }\r\n    .demo-upload-list:hover .demo-upload-list-cover{\r\n        display: block;\r\n    }\r\n    .demo-upload-list-cover i{\r\n        color: #fff;\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n        margin: 0 2px;\r\n    }\r\n</style>\r\n<template>\r\n  <div>\r\n    <Card class=\"mb-10\">\r\n      <Row>\r\n        <Col span=\"12\">\r\n          <h3>班级管理</h3>\r\n        </Col>\r\n        <Col span=\"12\" class=\"text-right\">\r\n          <component2 v-if=\"Super\">\r\n            <Button type=\"primary\" @click='addItem'class=\"mr-10\">新建</Button>\r\n            <Button type=\"error\" @click=\"myDelete\">删除</Button>\r\n          </component2>\r\n        </Col>\r\n      </Row>\r\n    </Card>\r\n    <Card>\r\n    <Row style=\"margin-bottom: 10px;\">\r\n          <span>关键字：</span>\r\n          <Input placeholder=\"请输入姓名\" v-model.trim='searchText' style=\"width:200px;margin-right:20px;\"></Input>\r\n          <Button type=\"primary\" @click='search'>搜索</Button>\r\n    </Row>\r\n        <Table size=\"large\"  @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"tableCol\" :data=\"tableData\">\r\n        </Table>\r\n        <Page class='mt-10 text-right' :total=\"total\" :current='currentPage' :page-size='pageSize' @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-sizer show-total/>\r\n    </Card>\r\n    <Modal\r\n      v-model=\"recordModal\"\r\n      title=\"任教老师详情\"\r\n      @on-cancel=\"closeRecordModal\"\r\n      width =60>\r\n      <Table height=\"300\" @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"recordCol\" :data=\"recordData\"></Table>\r\n      <Button type=\"primary\" icon=\"ios-arrow-dropdown\" ghost long @click=\"recordLoadMore\">加载更多</Button>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeRecordModal\">关闭</Button>\r\n      </div>\r\n    </Modal>\r\n\r\n    <Modal\r\n      v-model=\"recordModal1\"\r\n      title=\"班内学生详情\"\r\n      @on-cancel=\"closeRecordModal\"\r\n      width =60>\r\n      <Table height=\"300\" @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"recordCol1\" :data=\"recordData1\"></Table>\r\n      <Button type=\"primary\" icon=\"ios-arrow-dropdown\" ghost long @click=\"recordLoadMore\">加载更多</Button>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeRecordModal\">关闭</Button>\r\n      </div>\r\n    </Modal>\r\n\r\n\r\n     <Modal\r\n      v-model=\"saveItem\"\r\n      :title=\"itemTitle\"\r\n      width =800\r\n      @on-cancel='closeSaveItem'>\r\n      <Form ref=\"formData\" :model=\"formData\" :label-width=\"100\">\r\n        <input type=\"hidden\" name='id' v-model=\"formData.id\">\r\n        <component2 v-if=\"Super\">\r\n        <FormItem label=\"班级名称\">\r\n            <Input v-model=\"formData.className\" placeholder=\"请填写班级名称\" :maxlength=\"10\" style=\"width: 280px\"></Input>\r\n        </FormItem>\r\n        <FormItem label=\"班级称号\">\r\n            <Input v-model=\"formData.cname\" placeholder=\"请填写班级别名\" :maxlength=\"11\" style=\"width: 280px\"></Input>\r\n        </FormItem>\r\n      </component2>\r\n        <FormItem label=\"班级口号\" v-if=\"this.mainTeacher === formData.teacherId\">\r\n            <Input v-model=\"formData.remark\" type=\"textarea\" placeholder=\"请填写班级口号\" :maxlength=\"10\"></Input>\r\n        </FormItem>\r\n      <component2 v-if=\"viewAccessTeacher\">\r\n         <FormItem  v-if=\"this.mainTeacher !== formData.teacherId\">\r\n            <span  style=\"color: red;margin-left: 80px;font-size:20px\">*你不是这个班级的班主任,不能修改*</span>\r\n        </FormItem>\r\n      </component2>\r\n        <component2 v-if=\"Super\">\r\n          <FormItem label=\"指派任课老师\" >\r\n              <Transfer\r\n                  :data=\"teachersList\"\r\n                  :targetKeys=\"targetKeys\"\r\n                  :list-style=\"listStyle\"\r\n                  :render-format=\"render\"\r\n                  :operations=\"['移除','添加']\"\r\n                  filterable\r\n                  @on-change=\"handleChange\"\r\n                  >\r\n              </Transfer>\r\n          </FormItem>\r\n        </component2>\r\n      </Form>\r\n      <div slot=\"footer\">\r\n          <Button type=\"default\"  @click=\"closeSaveItem\">关闭</Button>\r\n          <Button type=\"primary\" :disabled='saveItemStatu'  @click=\"saveItemOk\">确认</Button>\r\n      </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { hasOneOf } from '@/libs/tools'\r\nimport { courseTableData,teacherArrTableData,studenrArrTableData,commentDel,appoinPeople,getAllTeacher,addCourse,updateCourse} from '@/api/data'\r\nexport default {\r\n  data () {\r\n    return {\r\n      searchText: '', // 搜索内容初始化\r\n      pageSize:10,\r\n      currentPage:1,\r\n      total:1,\r\n\r\n      recordModal:false,     \r\n      tableCurrentPage:1,    //评分记录当前页码\r\n      tableTotalPage:1,     //评分记录总页码\r\n      userId:'',      //评分记录用户id\r\n      //customItemArr: [],//评分记录\r\n      courseId:'',//评分记录Id\r\n\r\n      textModal:false,     \r\n      //delItemStatu:false,\r\n      courseDelText:'',\r\n\r\n      formData:{},      //表单信息\r\n      //teachersModal:false,\r\n      addUser:true, \r\n\r\n      teacherId:'',    \r\n      studentId:'', \r\n      tea:0, \r\n\r\n      saveItem:false,\r\n      saveItemStatu:false, \r\n      itemTitle:'班级编辑',\r\n\r\n      teachersList: [],\r\n      targetKeys: [],\r\n      listStyle: {\r\n          width: '280px',\r\n          height: '400px'\r\n      },\r\n\r\n      selectItemArr: [],    // 选中项目id\r\n      tableCol: [\r\n        {\r\n          type: 'selection',\r\n          width: 60,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '班级名称',\r\n          key: 'className',\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify(params))\r\n            var oName = params.row.className+\"(\"+params.row.cname+\")\";\r\n            return h('div', [\r\n              h('span', {}, oName)\r\n            ])\r\n          }\r\n        },\r\n        {\r\n          title: '班主任',\r\n          key: 'teacherName'\r\n        },\r\n        {\r\n          title: '班长',\r\n          key: 'studentName'\r\n        },\r\n        {\r\n          title: '任教老师',\r\n          key: 'teachers',\r\n          render: (h, params) => {\r\n               return h('div', [\r\n               h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'large',\r\n                  vertical:true\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    //console.log(\"++2222222++++\"+JSON.stringify( params.row.teacherId))\r\n                    this.userId = params.row.id;\r\n                    this.teacherId = params.row.teacherId;\r\n                    this.tableInit();\r\n                    this.recordModal = true;\r\n                  }\r\n                }\r\n              }, '详情')\r\n            ])\r\n          }\r\n        },\r\n\r\n        {\r\n          title: '班内学生',\r\n          key: 'students',\r\n          render: (h, params) => {\r\n               return h('div', [\r\n               h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'large',\r\n                  vertical:true\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    //console.log(\"++++++\"+JSON.stringify(params))\r\n                    this.userId = params.row.id;\r\n                    this.studentId = params.row.studentId;\r\n                    this.tableInit();\r\n                    this.recordModal1 = true;\r\n                  }\r\n                }\r\n              }, '详情')\r\n            ])\r\n          }\r\n        },\r\n        {\r\n          title: '班级口号',\r\n          key: 'remark',\r\n          width: 300\r\n        },\r\n        {\r\n          width:100,\r\n          title: '操作',\r\n          key: 'examineStatus',\r\n          render: (h, params) => {\r\n           // if(this.viewTeacher){\r\n              return h('div', [\r\n               h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'large',\r\n                  vertical:true,\r\n                  disabled:this.viewStudent\r\n                  //disabled:this.mainTeacher !== params.row.teacherId\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    \r\n                    let getData = JSON.parse(JSON.stringify(this.tableData[params.index]));\r\n                    this.formData = getData;\r\n                    this.saveItem = true;\r\n                    this.addUser = false;\r\n                    this.itemTitle = '编辑班级';\r\n                    if(this.formData.teachers.length>=1){\r\n                      for(var j in this.formData.teachers){\r\n                        this.targetKeys.push(this.formData.teachers[j].id);\r\n                      }\r\n                    }\r\n                    \r\n                    getAllTeacher().then(res => {\r\n                        if(res.data.success){\r\n                        //console.log(\"00000\"+JSON.stringify(res))\r\n                         var teachersArr = res.data.result.teachers;\r\n                         for(var i in teachersArr){\r\n                          var objCourses = {};\r\n                          objCourses.key = teachersArr[i].id;\r\n                          objCourses.label = teachersArr[i].name+'('+teachersArr[i].classEnumString+')';\r\n                          this.teachersList.push(objCourses)\r\n                         };\r\n                         \r\n                        }else {\r\n                           this.$Message.warning({\r\n                            content:res.data.errorMsg\r\n                          })\r\n                        }\r\n                      })\r\n                    \r\n                  }\r\n                }\r\n              }, '编辑')\r\n            ])\r\n           }\r\n        }\r\n      ],\r\n      recordCol:[\r\n        {\r\n          title: '老师名称',\r\n          key: 'teacherName'\r\n        },\r\n        {\r\n          title: '老师手机',\r\n          key: 'teacherPhone'\r\n        },\r\n         {\r\n          title: '老师任教课程',\r\n          key: 'classEnumString'\r\n        },\r\n        {\r\n          width:120,\r\n          title: '操作',\r\n          key: 'examine',\r\n          render: (h, params) => {\r\n            //console.log(\"+++55wwww5+++\"+JSON.stringify(params))\r\n           // if(this.viewTeacher){\r\n              return h('div', [\r\n               h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'small',\r\n                  vertical:true,\r\n                  disabled:this.aaTeacher || this.recordData[params.index].id === this.teacherId \r\n                  //disabled:this.viewAccessTeacher\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    \r\n                    let getData = JSON.parse(JSON.stringify(this.recordData[params.index]));\r\n                    this.formData = getData;\r\n                    appoinPeople(this.formData.id,this.userId,0).then(res => {\r\n                        if(res.data.success){\r\n                          this.$Message.success({\r\n                            content:'任命班主任成功'\r\n                          });\r\n                           this.tableInit();\r\n                           this.recordModal = false;\r\n                           this.pageInit();\r\n                           //this.recordData=[];\r\n                        }else {\r\n                           this.$Message.warning({\r\n                            content:res.data.errorMsg\r\n                          })\r\n                        }\r\n                      })\r\n                    \r\n                  }\r\n                }\r\n              }, '委任为班主任')\r\n            ])\r\n           }\r\n        }\r\n      ],\r\n      recordCol1:[\r\n        {\r\n          title: '学生名称',\r\n          key: 'studentName'\r\n        },\r\n        {\r\n          title: '老师手机',\r\n          key: 'studentPhone'\r\n        },\r\n        {\r\n          title: '评分',\r\n          key: 'customNumPj',\r\n           render: (h, params) => {\r\n            //console.log(\"+++111+++\"+JSON.stringify(params))\r\n            var oName = params.row.customNumPj+'分';\r\n            return h('div', [\r\n              h('Rate', {\r\n                props: {\r\n                  count: 5,\r\n                  disabled:true,\r\n                  allowHalf:true,\r\n                  showText:true,\r\n                  value:params.row.customNumPj\r\n                }\r\n              }, oName)\r\n            ])\r\n          }\r\n        },\r\n        {\r\n          width:120,\r\n          title: '操作',\r\n          key: 'examine',\r\n          render: (h, params) => {\r\n            //console.log(\"+++55wwww5+++\"+JSON.stringify(this.tableData))\r\n            //console.log(\"+++66666+++\"+JSON.stringify(this.mainTeacher))\r\n           // if(this.viewTeacher){\r\n              return h('div', [\r\n               h('Button', {\r\n                props: {\r\n                  type: 'primary',\r\n                  size: 'small',\r\n                  vertical:true,\r\n                  disabled:this.recordData1[params.index].id === this.studentId || this.viewTeacher ||this.mainTeacher !== this.tea\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    \r\n                    let getData = JSON.parse(JSON.stringify(this.recordData1[params.index]));\r\n                    this.formData = getData;\r\n                    appoinPeople(this.formData.id,this.userId,1).then(res => {\r\n                        if(res.data.success){\r\n                          this.$Message.success({\r\n                            content:'任命班长成功'\r\n                          });\r\n                           this.tableInit();\r\n                           this.recordModal1 = false;\r\n                           this.pageInit();\r\n                           //this.recordData=[];\r\n                        }else {\r\n                           this.$Message.warning({\r\n                            content:res.data.errorMsg\r\n                          })\r\n                        }\r\n                      })\r\n                    \r\n                  }\r\n                }\r\n              }, '委任为班长')\r\n            ])\r\n           }\r\n        }\r\n      ],\r\n      tableData: [],\r\n      recordData:[],\r\n      recordData1:[]\r\n    }\r\n  },\r\n  methods: {\r\n    async pageInit(){\r\n      courseTableData(this.pageSize,this.currentPage,this.searchText).then(res => {\r\n        if(res.data.success){\r\n          this.total = res.data.result.data.totalSize;\r\n          this.tableData = res.data.result.data.pageList;\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    async tableInit(){\r\n      teacherArrTableData(this.userId,this.tableCurrentPage).then(res => {\r\n        //console.log(\"++++++\"+JSON.stringify(res))\r\n        this.recordData=[];\r\n        if(res.data.success){\r\n          this.tableCurrentPage = res.data.result.data.currectPage;\r\n          this.tableTotalPage = res.data.result.data.totalPage;\r\n          var dataList = res.data.result.data.pageList;\r\n          var recordO = {};\r\n          for(let item of dataList) {\r\n            recordO = {};\r\n            recordO.id = item.id;\r\n            recordO.teacherName = item.name;\r\n            recordO.teacherPhone = item.phone;\r\n            recordO.classEnumString = item.classEnumString;\r\n            // recordO.positionAddr = item.lock.positionAddr;\r\n            // recordO.name = item.lock.name;\r\n            this.recordData.push(recordO);\r\n          }\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n\r\n      studenrArrTableData(this.userId,this.tableCurrentPage).then(res => {\r\n        //console.log(\"++++++\"+JSON.stringify(res))\r\n        this.recordData1=[];\r\n        if(res.data.success){\r\n          this.tableCurrentPage = res.data.result.data.currectPage;\r\n          this.tableTotalPage = res.data.result.data.totalPage;\r\n          this.tea = res.data.result.courseById.teacherId;\r\n          var dataList = res.data.result.data.pageList;\r\n          var recordO = {};\r\n          for(let item of dataList) {\r\n            recordO = {};\r\n            recordO.id = item.id;\r\n            recordO.studentName = item.name;\r\n            recordO.studentPhone = item.phone;\r\n            recordO.customNumPj = item.customNumPj;\r\n            // recordO.positionAddr = item.lock.positionAddr;\r\n            // recordO.name = item.lock.name;\r\n            this.recordData1.push(recordO);\r\n          }\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    changePage(page){\r\n      this.currentPage = page;\r\n      this.pageInit();\r\n    },\r\n    changeSize(size){\r\n      this.pageSize = size;\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    closeRecordModal(){\r\n      this.recordModal = false;\r\n      this.recordModal1 = false;\r\n      this.tableCurrentPage = 1;\r\n      this.recordData = [];\r\n      this.recordData1 = [];\r\n    },\r\n    closeTextModal(){\r\n      this.textModal = false;\r\n      this.tableCurrentPage = 1;\r\n      this.recordData = [];\r\n    },\r\n     closeSaveItem(){\r\n      this.formData = {};\r\n      this.saveItem = false;\r\n      this.targetKeys=[];\r\n      this.teachersList=[];\r\n    },\r\n    addItem(){\r\n      this.formData = {};\r\n      this.itemTitle = '添加班级';\r\n      this.addUser = true;\r\n      this.saveItem = true;\r\n      if(this.teachersList.length>=1){\r\n        return;\r\n      };\r\n      getAllTeacher().then(res => {\r\n\r\n        if(res.data.success){\r\n        //console.log(\"00000\"+JSON.stringify(res))\r\n         var teachersArr = res.data.result.teachers;\r\n         for(var i in teachersArr){\r\n          var objCourses = {};\r\n          objCourses.key = teachersArr[i].id;\r\n          objCourses.label = teachersArr[i].name+'('+teachersArr[i].classEnumString+')';\r\n          this.teachersList.push(objCourses)\r\n         };\r\n         \r\n        }else {\r\n           this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n     },\r\n     saveItemOk(){\r\n      var that = this;\r\n      var formData = this.formData;\r\n      //console.log(\"qqqqqqqqqqqq\"+JSON.stringify(formData))\r\n      if(!formData.className){\r\n        this.$Message.warning({\r\n          content:'请填写班级名称！'\r\n        });\r\n        return;\r\n      };\r\n      if(this.addUser){\r\n        //alert(1)\r\n          addCourse(this.formData,this.targetKeys).then(res => {\r\n              // console.log(JSON.stringify(res))\r\n              if(res.data.result && res.data.result.error){\r\n                this.$Message.warning({\r\n                  content:res.data.result.error\r\n                })\r\n                return;\r\n              }else if(res.data.success){\r\n                this.$Message.success({\r\n                  content:'班级保存成功'\r\n                });\r\n                that.saveItem = false;\r\n                //that.saveItem1 = false;\r\n                that.pageInit();\r\n              }else if(res.data.errorMsg){\r\n                this.$Message.warning({\r\n                  content:res.data.errorMsg\r\n                })\r\n              }\r\n              that.saveItemStatu = false;\r\n            })\r\n        }else {\r\n          updateCourse(this.formData,this.targetKeys).then(res => {\r\n              // console.log(JSON.stringify(res))\r\n              if(res.data.result && res.data.result.error){\r\n                this.$Message.warning({\r\n                  content:res.data.result.error\r\n                })\r\n                return;\r\n              }else if(res.data.success){\r\n                this.$Message.success({\r\n                  content:'班级修改成功'\r\n                });\r\n                that.saveItem = false;\r\n                //that.saveItem1 = false;\r\n                this.teachersList=[];\r\n                that.pageInit();\r\n              }else if(res.data.errorMsg){\r\n                this.$Message.warning({\r\n                  content:res.data.errorMsg\r\n                })\r\n              }\r\n              that.saveItemStatu = false;\r\n            })\r\n        }\r\n      },\r\n    // 选中项\r\n    selectOption (selection, row) {\r\n      this.selectItemArr = []\r\n      for (let item of selection) {\r\n        this.selectItemArr.push(item.id)\r\n      }\r\n    },\r\n    // 删除\r\n    myDelete () {\r\n      var selectItemArr = this.selectItemArr\r\n      console.log(\"++++++\"+JSON.stringify(selectItemArr))\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      commentDel('/course/delCourse', selectItemArr).then(res => {\r\n        console.log(JSON.stringify(res))\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'删除成功！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    // 搜索\r\n    search () {\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    recordLoadMore(){\r\n      if(this.tableCurrentPage === this.tableTotalPage){\r\n        this.$Message.warning({\r\n          content:'暂无更多数据'\r\n        })\r\n        return;\r\n      }\r\n      this.tableCurrentPage += 1;\r\n      this.tableInit();\r\n    },\r\n    handleChange(newTargetKeys) {\r\n        this.targetKeys = newTargetKeys;\r\n    },\r\n    render (item) {\r\n        return item.label;\r\n    },\r\n    reloadMockData () {\r\n        this.transfer = this.getMockData();\r\n        this.targetKeys = this.getTargetKeys();\r\n    }\r\n  },\r\n  mounted () {\r\n    // 初始化\r\n    courseTableData(10, 1).then(res => {\r\n       //console.log(\"--11111--\"+JSON.stringify(res));\r\n      if(res.data.success){\r\n        this.total = res.data.result.data.totalSize;\r\n        this.tableData = res.data.result.data.pageList;\r\n        this.tea=this.tableData.teacherId;\r\n        console.log(\"----\"+JSON.stringify(this.tableData));\r\n      }else if(res.data.errorMsg){\r\n        this.$Message.warning({\r\n          content:res.data.errorMsg\r\n        })\r\n      }\r\n    })\r\n  },\r\n  computed: {\r\n    access () {\r\n      console.log(\"++++++\"+JSON.stringify(this.$store.state.user.access))\r\n      return this.$store.state.user.access\r\n    },\r\n    mainTeacher () {\r\n      return this.$store.state.user.teacherId\r\n    },\r\n    //所有权限\r\n    viewAccessAll () {\r\n      return hasOneOf(['superAdmin', 'teacher','student'], this.access)\r\n    },\r\n    //部分权限\r\n    viewAccessTeacher () {\r\n      return hasOneOf(['teacher'], this.access)\r\n    },\r\n  //部分权限\r\n    viewTeacher () {\r\n      return hasOneOf(['superAdmin','student'], this.access)\r\n    },\r\n    aaTeacher () {\r\n      return hasOneOf(['teacher','student'], this.access)\r\n    },\r\n    //部分权限\r\n    Super () {\r\n      return hasOneOf(['superAdmin'], this.access)\r\n    },\r\n    //部分权限\r\n    viewStudent () {\r\n      return hasOneOf(['student'], this.access)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}