{"remainingRequest":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\results\\readResult.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\src\\myView\\results\\readResult.vue","mtime":1618817111120},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1618890453389},{"path":"C:\\Users\\茹家豪\\Desktop\\20210416_rujh_vue\\20210416_rujh_vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n@import \"./common.less\";\n.demo-upload-list{\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0,0,0,.2);\n    margin-right: 4px;\n}\n.demo-upload-list img{\n    width: 100%;\n    height: 100%;\n}\n.demo-upload-list-cover{\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0,0,0,.6);\n}\n.demo-upload-list:hover .demo-upload-list-cover{\n    display: block;\n}\n.demo-upload-list-cover i{\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n}\n.ivu-table .demo-table-info-cell-age {\n    background-color: #ff6600;\n    color: #fff;\n}\n",{"version":3,"sources":["readResult.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"readResult.vue","sourceRoot":"src\\myView\\results","sourcesContent":["<style>\r\n    @import \"./common.less\";\r\n    .demo-upload-list{\r\n        display: inline-block;\r\n        width: 60px;\r\n        height: 60px;\r\n        text-align: center;\r\n        line-height: 60px;\r\n        border: 1px solid transparent;\r\n        border-radius: 4px;\r\n        overflow: hidden;\r\n        background: #fff;\r\n        position: relative;\r\n        box-shadow: 0 1px 1px rgba(0,0,0,.2);\r\n        margin-right: 4px;\r\n    }\r\n    .demo-upload-list img{\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n    .demo-upload-list-cover{\r\n        display: none;\r\n        position: absolute;\r\n        top: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n        background: rgba(0,0,0,.6);\r\n    }\r\n    .demo-upload-list:hover .demo-upload-list-cover{\r\n        display: block;\r\n    }\r\n    .demo-upload-list-cover i{\r\n        color: #fff;\r\n        font-size: 20px;\r\n        cursor: pointer;\r\n        margin: 0 2px;\r\n    }\r\n    .ivu-table .demo-table-info-cell-age {\r\n        background-color: #ff6600;\r\n        color: #fff;\r\n    }\r\n</style>\r\n<template>\r\n  <div>\r\n  \t<Card class=\"mb-10\">\r\n    \t<Row>\r\n    \t\t<Col span=\"12\">\r\n    \t\t\t<h3>成绩查询</h3>\r\n    \t\t</Col>\r\n    \t\t<Col span=\"12\" class=\"text-right\">\r\n          <component2 v-if=\"viewAccessTeacher\">\r\n             <Button icon=\"md-download\" :loading=\"exportLoading\" @click=\"exportExcel\" class=\"mr-10\">导出文件\r\n             </Button>\r\n          </component2>\r\n          <component2 v-if=\"Super\">\r\n            <Button type=\"error\" @click='delItem'class=\"mr-10\">删除</Button>\r\n          </component2>\r\n\t\t\t\t  <component2 v-if=\"viewAccessTeacher\">\r\n            <Button type=\"primary\" @click=\"myDelete\" >移至成绩编辑</Button>\r\n          </component2>\r\n    \t\t</Col>\r\n    \t</Row>\r\n  \t</Card>\r\n    <Card>\r\n\t\t<Row style=\"margin-bottom: 10px;\">\r\n      <!-- <Col span=\"4\">\r\n        <span>审核状态：</span>\r\n        <Select v-model=\"examineStatu\" style=\"width:100px\">\r\n            <Option v-for=\"item in examineSelect\" :value=\"item.examineCode\" :key=\"item.examineCode\">{{ item.examineText }}</Option>\r\n        </Select>\r\n      </Col> -->\r\n          <span>日期范围：</span>\r\n          <DatePicker style=\"width:120px\" type=\"date\" format=\"yyyy-MM-dd\" :value='startTime' @on-change='myStartTime' placeholder=\"开始日期\"></DatePicker>\r\n          <span>~</span>\r\n          <DatePicker style=\"width:120px;margin-right:20px;\" type=\"date\" format=\"yyyy-MM-dd\" :value='endTime' @on-change='myEndTime' placeholder=\"结束日期\"></DatePicker>\r\n          <span>关键字：</span>\r\n          <Input placeholder=\"请输入姓名\" v-model.trim='searchText' style=\"width:100px;margin-right:20px;\"></Input>\r\n          <span>考试时间：</span>\r\n           <Select v-model=\"examTimes\" style=\"width:100px;margin-right:0px;\">\r\n             <Option value=\"\">请选择</Option>\r\n            <Option v-for=\"item in examTime\" :value=\"item\" :key=\"item\" clearable=ture>{{ item}}</Option>\r\n          </Select>\r\n           <Select v-model=\"examStatus\" style=\"width:100px;margin-right:20px;\">\r\n             <Option value=\"\">请选择</Option>\r\n            <Option v-for=\"item in exam\" :value=\"item.id\" :key=\"item.id\">{{ item.name }}</Option>\r\n          </Select>\r\n          <Button type=\"primary\" @click='search'>搜索</Button>\r\n\t\t</Row>\r\n        <Table size=\"large\" @on-selection-change=\"selectOption\" stripe ref=\"selection\" :columns=\"tableCol\" :data=\"tableData\">\r\n        </Table>\r\n        <Page class='mt-10 text-right' :total=\"total\" :current='currentPage' :page-size='pageSize' @on-change=\"changePage\" @on-page-size-change=\"changeSize\" show-sizer show-total/>\r\n    </Card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport excel from '@/libs/excel'\r\nimport { hasOneOf } from '@/libs/tools'\r\nimport { resultsTableData,selectExamTime, commentDels,commentDel} from '@/api/data'\r\nexport default {\r\n  data () {\r\n    return {\r\n      exportLoading: false,\r\n\r\n    \tstartTime: '', // 日期初始化\r\n    \tendTime: '', \t// 日期初始化\r\n      strTime:'',\r\n    \tsearchText: '',\t// 搜索内容初始化\r\n      pageSize:10,\r\n      currentPage:1,\r\n      total:1,\r\n      examTimes:'',\r\n      examStatus:null,\r\n     // states:0,\r\n      //studentName:'',\r\n     /* loading1: false,\r\n      options1:[],\r\n      students:[],*/\r\n\r\n      formData:{},      //表单信息\r\n      //addUser:true,   //是否为新增用户\r\n\r\n\r\n      saveItem:false,     //保存操作框\r\n      saveItemStatu:false,     //保存点击状态\r\n      itemTitle:'成绩分析',   //保存操作框title\r\n\r\n    \tselectItemArr: [],\t\t// 选中项目id\r\n\r\n      exam:[],\r\n      examTime:[],\r\n      tableData: [],\r\n      //myarry[{lable:'aa',value:'qq'},{lable:'bb',value:'cc'}],\r\n      tableCol: [\r\n        {\r\n          type: 'selection',\r\n          width: 50,\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '姓名',\r\n          width: 80,\r\n          key: 'name'\r\n        },\r\n        {\r\n          title: '考试时间',\r\n          width: 180,\r\n          key: 'classEnumString',\r\n          sortable: true\r\n\r\n         /*filters: [\r\n           /*{\r\n              lable:\"aa\",\r\n              value:\"qq\"\r\n           },\r\n         ],  \r\n         filterMultiple:false,\r\n         filterMethod (value, row) {\r\n            var arr = this.examTime;\r\n             for(var i in arr){\r\n                  var newObj = {};\r\n                  newObj.lable = arr[i];\r\n                  newObj.value = arr[i];\r\n                  filters.push(newObj);\r\n              }\r\n            \r\n          }*/\r\n        },\r\n        {\r\n          title: '语文成绩',\r\n          key: 'chinese',\r\n          align: 'center',\r\n          width: 120,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify( params.row.chinese))\r\n            var oName = params.row.chinese;\r\n            if (oName < 90) {\r\n               return h('div', {\r\n                style:{\r\n                  border :'#ff6600',\r\n                  background :'#ff6600'\r\n                }\r\n              },oName)\r\n            }else {\r\n              return h('div', [\r\n                h('div', {}, oName)\r\n              ])\r\n            }\r\n          }\r\n        },\r\n        {\r\n          title: '数学成绩',\r\n          key: 'math',\r\n          align: 'center',\r\n          width: 120,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify( params.row.chinese))\r\n            var oName = params.row.math;\r\n            if (oName < 90) {\r\n               return h('div', {\r\n                style:{\r\n                  border :'#ff6600',\r\n                  background :'#ff6600'\r\n                }\r\n              },oName)\r\n            }else {\r\n              return h('div', [\r\n                h('div', {}, oName)\r\n              ])\r\n            }\r\n          }\r\n        },\r\n         {\r\n          title: '英语成绩',\r\n          key: 'english',\r\n          align: 'center',\r\n          width: 120,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify( params.row.chinese))\r\n            var oName = params.row.english;\r\n            if (oName < 90) {\r\n               return h('div', {\r\n                style:{\r\n                  border :'#ff6600',\r\n                  background :'#ff6600'\r\n                }\r\n              },oName)\r\n            }else {\r\n              return h('div', [\r\n                h('div', {}, oName)\r\n              ])\r\n            }\r\n          }\r\n        },\r\n         {\r\n          title: '政治成绩',\r\n          key: 'political',\r\n          align: 'center',\r\n          width: 120,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify( params.row.chinese))\r\n            var oName = params.row.political;\r\n            if (oName < 60) {\r\n               return h('div', {\r\n                style:{\r\n                  border :'#ff6600',\r\n                  background :'#ff6600'\r\n                }\r\n              },oName)\r\n            }else {\r\n              return h('div', [\r\n                h('div', {}, oName)\r\n              ])\r\n            }\r\n          }\r\n        },\r\n         {\r\n          title: '历史成绩',\r\n          key: 'history',\r\n          align: 'center',\r\n          width: 120,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify( params.row.chinese))\r\n            var oName = params.row.history;\r\n            if (oName < 60) {\r\n               return h('div', {\r\n                style:{\r\n                  border :'#ff6600',\r\n                  background :'#ff6600'\r\n                }\r\n              },oName)\r\n            }else {\r\n              return h('div', [\r\n                h('div', {}, oName)\r\n              ])\r\n            }\r\n          }\r\n        },\r\n        {\r\n          title: '地理成绩',\r\n          key: 'geographic',\r\n          align: 'center',\r\n          width: 120,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify( params.row.chinese))\r\n            var oName = params.row.geographic;\r\n            if (oName < 60) {\r\n               return h('div', {\r\n                style:{\r\n                  border :'#ff6600',\r\n                  background :'#ff6600'\r\n                }\r\n              },oName)\r\n            }else {\r\n              return h('div', [\r\n                h('div', {}, oName)\r\n              ])\r\n            }\r\n          }\r\n        },\r\n        {\r\n          title: '总成绩',\r\n          key: 'sumResult',\r\n          align: 'center',\r\n          width: 120,\r\n          sortable: true\r\n        },\r\n        {\r\n          title: '平均成绩',\r\n          key: 'pjResult',\r\n          align: 'center',\r\n          width: 120,\r\n          sortable: true,\r\n          render: (h, params) => {\r\n            //console.log(\"++++++\"+JSON.stringify( params.row.chinese))\r\n            var oName = params.row.pjResult;\r\n            if (oName < 80) {\r\n               return h('div', {\r\n                style:{\r\n                  border :'#ff6600',\r\n                  background :'#ff6600'\r\n                }\r\n              },oName)\r\n            }else {\r\n              return h('div', [\r\n                h('div', {}, oName)\r\n              ])\r\n            }\r\n          }\r\n        }\r\n      ],\r\n    }\r\n  },\r\n  methods: {\r\n    //查询时间\r\n    async pageInit(){\r\n\r\n      selectExamTime(1).then(res => {\r\n         console.log(\"----\"+JSON.stringify(res));\r\n        if(res.data.success){\r\n            this.exam = res.data.result.exam;\r\n          }else if(res.data.errorMsg){\r\n            this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n      resultsTableData(this.pageSize,this.currentPage,this.startTime,this.endTime,this.searchText,this.examTimes,this.examStatus,1).then(res => {\r\n        if(res.data.success){\r\n          this.total = res.data.result.data.totalSize;\r\n          this.tableData = res.data.result.data.pageList;\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    changePage(page){\r\n      this.currentPage = page;\r\n      this.pageInit();\r\n    },\r\n    changeSize(size){\r\n      this.pageSize = size;\r\n      this.currentPage = 1;\r\n      this.pageInit();\r\n    },\r\n    delItem(){\r\n      var selectItemArr = this.selectItemArr\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      console.log('0000000000000000000'+JSON.stringify(selectItemArr))\r\n      //alert('确定移除吗？');\r\n      commentDel('/results/delResultById', selectItemArr).then(res => {\r\n        //console.log(JSON.stringify(res))\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'已将选中成绩移动至成绩编辑中！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })\r\n    },\r\n\r\n    // 关闭保存项目模态框\r\n    closeSaveItem(){\r\n      this.formData = {};\r\n      this.saveItem = false;\r\n      this.targetKeys=[];\r\n    },\r\n  \t// 选中项\r\n  \tselectOption (selection, row) {\r\n  \t\tthis.selectItemArr = []\r\n  \t\tfor (let item of selection) {\r\n        this.selectItemArr.push(item.id)\r\n\t    }\r\n  \t},\r\n  \t// 删除\r\n  \tmyDelete () {\r\n  \t\tvar selectItemArr = this.selectItemArr\r\n      if(selectItemArr.length<1){\r\n        this.$Message.warning({\r\n          content:'请选择项目！'\r\n        })\r\n        return;\r\n      }\r\n      //alert('确定移除吗？');\r\n      commentDels('/results/updateResultById', selectItemArr,0).then(res => {\r\n        //console.log(JSON.stringify(res))\r\n        if(res.data.success){\r\n          this.selectItemArr=[];\r\n          this.pageInit();\r\n          this.$Message.success({\r\n            content:'已将选中成绩移动至成绩编辑中！'\r\n          });\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n            content:res.data.errorMsg\r\n          })\r\n        }\r\n\r\n        // this.tableData = res.data.result.data.pageList;\r\n      })\r\n  \t},\r\n  \t// 入住日期\r\n  \tmyStartTime (newTime) {\r\n  \t\tthis.startTime = newTime\r\n  \t},\r\n  \t// 退房日期\r\n  \tmyEndTime (newTime) {\r\n  \t\tthis.endTime = newTime\r\n  \t},\r\n    myStrTime (newTime) {\r\n      this.strTime = newTime\r\n    },\r\n  \t// 搜索\r\n  \tsearch () {\r\n      this.currentPage = 1;\r\n  \t\tthis.pageInit();\r\n  \t},\r\n    handleChange(newTargetKeys) {\r\n        this.targetKeys = newTargetKeys;\r\n    },\r\n    render (item) {\r\n        return item.label;\r\n    },\r\n    reloadMockData () {\r\n        this.transfer = this.getMockData();\r\n        this.targetKeys = this.getTargetKeys();\r\n    },\r\n    //excel导出\r\n    exportExcel () {\r\n      if (this.tableData.length) {\r\n        this.exportLoading = true\r\n        const params = {\r\n          title: ['姓名', '考试时间','语文', '数学','英语','政治','历史','地理','总分','平均分'],\r\n          key: ['name', 'classEnumString', 'chinese','math','english','political','history','geographic','sumResult','pjResult'],\r\n          data: this.tableData,\r\n          autoWidth: true,\r\n          filename: '成绩表'\r\n        }\r\n        excel.export_array_to_excel(params)\r\n        this.exportLoading = false\r\n      } else {\r\n        this.$Message.info('表格数据不能为空！')\r\n      }\r\n    },\r\n\r\n  },\r\n\r\n\r\n  //--------------------------------------------------\r\n  mounted () {\r\n    // 初始化\r\n    //查询时间\r\n    selectExamTime(1).then(res => {\r\n      if(res.data.success){\r\n          this.examTime = res.data.result.examTime;\r\n          this.exam = res.data.result.exam;\r\n         //console.log(\"----\"+JSON.stringify(this.examTime));\r\n        }else if(res.data.errorMsg){\r\n          this.$Message.warning({\r\n          content:res.data.errorMsg\r\n        })\r\n      }\r\n    })\r\n    //alert(1)\r\n    resultsTableData(10, 1,null,null,null,null,null,1).then(res => {\r\n       //console.log(\"----\"+JSON.stringify(res));\r\n      if(res.data.success){\r\n        this.total = res.data.result.data.totalSize;\r\n        this.tableData = res.data.result.data.pageList;\r\n      }else if(res.data.errorMsg){\r\n        this.$Message.warning({\r\n          content:res.data.errorMsg\r\n        })\r\n      }\r\n    })\r\n    // 图片上传\r\n    // this.uploadList = this.$refs.upload.fileList;\r\n  },\r\n  computed: { \r\n    access () {\r\n      return this.$store.state.user.access\r\n    },\r\n    //所有权限\r\n    viewAccessAll () {\r\n      return hasOneOf(['superAdmin', 'teacher','student'], this.access)\r\n    },\r\n    //部分权限\r\n    viewAccessTeacher () {\r\n      return hasOneOf(['superAdmin','teacher'], this.access)\r\n    },\r\n    Super () {\r\n      return hasOneOf(['superAdmin'], this.access)\r\n    },\r\n    no () {\r\n      return hasOneOf(['aaa'], this.access)\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}